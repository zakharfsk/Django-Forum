# Django Forum - –ü–æ–≤–Ω–∏–π –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –û–≥–ª—è–¥ –ü—Ä–æ–µ–∫—Ç—É

## –ó–º—ñ—Å—Ç
1. [–ó–∞–≥–∞–ª—å–Ω–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è](#–∑–∞–≥–∞–ª—å–Ω–∞-—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –°—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π-—Å—Ç–µ–∫)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç—É)
4. [Django –î–æ–¥–∞—Ç–∫–∏](#django-–¥–æ–¥–∞—Ç–∫–∏)
5. [–ú–æ–¥–µ–ª—ñ –î–∞–Ω–∏—Ö —Ç–∞ –ó–≤'—è–∑–∫–∏](#–º–æ–¥–µ–ª—ñ-–¥–∞–Ω–∏—Ö-—Ç–∞-–∑–≤—è–∑–∫–∏)
6. [–û—Å–Ω–æ–≤–Ω–∏–π –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª](#–æ—Å–Ω–æ–≤–Ω–∏–π-—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª)
7. [–°–∏—Å—Ç–µ–º–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –ü—Ä–∞–≤ –î–æ—Å—Ç—É–ø—É](#—Å–∏—Å—Ç–µ–º–∞-–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó-—Ç–∞-–ø—Ä–∞–≤-–¥–æ—Å—Ç—É–ø—É)
8. [URL –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è](#url-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è)
9. [–§–æ—Ä–º–∏ —Ç–∞ –í–∞–ª—ñ–¥–∞—Ü—ñ—è](#—Ñ–æ—Ä–º–∏-—Ç–∞-–≤–∞–ª—ñ–¥–∞—Ü—ñ—è)
10. [–®–∞–±–ª–æ–Ω–∏ —Ç–∞ UI](#—à–∞–±–ª–æ–Ω–∏-—Ç–∞-ui)
11. [–ë–∞–∑–∞ –î–∞–Ω–∏—Ö —Ç–∞ –ú—ñ–≥—Ä–∞—Ü—ñ—ó](#–±–∞–∑–∞-–¥–∞–Ω–∏—Ö-—Ç–∞-–º—ñ–≥—Ä–∞—Ü—ñ—ó)
12. [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è-—Ç–∞-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
13. [Management Commands](#management-commands)
14. [–î–µ–ø–ª–æ–π–º–µ–Ω—Ç](#–¥–µ–ø–ª–æ–π–º–µ–Ω—Ç)
15. [–ë–µ–∑–ø–µ–∫–∞](#–±–µ–∑–ø–µ–∫–∞)
16. [–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó](#–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó)

---

## –ó–∞–≥–∞–ª—å–Ω–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**–¢–∏–ø –ø—Ä–æ–µ–∫—Ç—É:** –ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Ñ–æ—Ä—É–º/–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±–≥–æ–≤–æ—Ä–µ–Ω—å

**–í–µ—Ä—Å—ñ—è Django:** 6.0

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –§–æ—Ä—É–º –∑ —Å–∏—Å—Ç–µ–º–æ—é –∫–∞—Ç–µ–≥–æ—Ä—ñ–π, —Ç–æ–ø—ñ–∫—ñ–≤, –ø–æ—Å—Ç—ñ–≤, –º–æ–¥–µ—Ä–∞—Ü—ñ—î—é –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ —Ä–æ–ª—å–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É

**–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –∑ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤ (—Ç–µ–º –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è)
- –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–æ–ø—ñ–∫–∞—Ö (–ø–æ—Å—Ç–∏)
- –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É (—Å—Ö–≤–∞–ª–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤)
- –†–æ–ª—å–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É (6 —Ä–æ–ª–µ–π –∑ —Ä—ñ–∑–Ω–∏–º–∏ –ø–æ–≤–Ω–æ–≤–∞–∂–µ–Ω–Ω—è–º–∏)
- –ü—Ä–æ—Ñ—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –∞–≤–∞—Ç–∞—Ä–∞–º–∏ —Ç–∞ –±—ñ–æ–≥—Ä–∞—Ñ—ñ—î—é
- –ü–æ—à—É–∫ –ø–æ —Ç–æ–ø—ñ–∫–∞—Ö —Ç–∞ –ø–æ—Å—Ç–∞—Ö
- –°–∏—Å—Ç–µ–º–∞ –±–∞–Ω—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –°—Ç–µ–∫

### Backend
- **Django 6.0** - –æ—Å–Ω–æ–≤–Ω–∏–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Python 3.13+** - –º–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É (—á–µ—Ä–µ–∑ psycopg2-binary —Ç–∞ psycopg[binary])
- **Neon.tech** - serverless PostgreSQL —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- **SQLite** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –ë–î –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏

### Frontend
- **Bootstrap 5.3** - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Bootstrap Icons** - —ñ–∫–æ–Ω–∫–∏
- **CKEditor 5** - —Ä–µ–¥–∞–∫—Ç–æ—Ä Rich Text (—á–µ—Ä–µ–∑ django-ckeditor-5)
- **HTML/CSS/JavaScript** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–∞ –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- **Pillow 12.0.0** - –æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å (–∞–≤–∞—Ç–∞—Ä–∏)
- **dj-database-url 3.0.1** - –ø–∞—Ä—Å–∏–Ω–≥ URL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- **environs 14.5.0** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏–º–∏ –æ—Ç–æ—á–µ–Ω–Ω—è
- **Gunicorn 23.0.0** - WSGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
- **Uvicorn 0.38.0** - ASGI —Å–µ—Ä–≤–µ—Ä (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

### –î–µ–ø–ª–æ–π–º–µ–Ω—Ç
- **OnRender** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É
- **Neon.tech** - —Ö–æ—Å—Ç–∏–Ω–≥ PostgreSQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- **Docker-—Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç—É

```
DjangoForum/
‚îú‚îÄ‚îÄ apps/                          # Django –¥–æ–¥–∞—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ forum/                     # –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ñ–æ—Ä—É–º—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/            # –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py               # –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms.py               # –§–æ—Ä–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py              # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ urls.py                # URL –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ views.py               # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è (views)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ users/                     # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ management/commands/   # –ö–∞—Å—Ç–æ–º–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ init_roles.py      # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ migrations/            # –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ templatetags/          # –ö–∞—Å—Ç–æ–º–Ω—ñ —Ç–µ–≥–∏ —à–∞–±–ª–æ–Ω—ñ–≤
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ user_tags.py       # –¢–µ–≥–∏ –¥–ª—è —Ä–æ–ª–µ–π —Ç–∞ –ø—Ä–∞–≤
‚îÇ       ‚îú‚îÄ‚îÄ admin.py               # –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
‚îÇ       ‚îú‚îÄ‚îÄ forms.py               # –§–æ—Ä–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ models.py              # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ       ‚îú‚îÄ‚îÄ signals.py             # Django —Å–∏–≥–Ω–∞–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ urls.py                # URL –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ views.py               # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è (views)
‚îÇ
‚îú‚îÄ‚îÄ config/                        # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Django
‚îÇ   ‚îú‚îÄ‚îÄ asgi.py                    # ASGI –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ settings.py                # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                    # –ì–æ–ª–æ–≤–Ω—ñ URL –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py                    # WSGI –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ‚îÄ templates/                     # HTML —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ base.html                  # –ë–∞–∑–æ–≤–∏–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ forum/                     # –®–∞–±–ª–æ–Ω–∏ —Ñ–æ—Ä—É–º—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category_detail.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ topic_detail.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ topic_create.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ moderation_queue.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search.html
‚îÇ   ‚îî‚îÄ‚îÄ users/                     # –®–∞–±–ª–æ–Ω–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ login.html
‚îÇ       ‚îú‚îÄ‚îÄ register.html
‚îÇ       ‚îú‚îÄ‚îÄ profile.html
‚îÇ       ‚îî‚îÄ‚îÄ profile_update.html
‚îÇ
‚îú‚îÄ‚îÄ static/                        # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (CSS, JS, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
‚îú‚îÄ‚îÄ staticfiles/                   # –ó—ñ–±—Ä–∞–Ω—ñ —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
‚îú‚îÄ‚îÄ media/                         # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ —Ñ–∞–π–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ deploy.sh                      # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É
‚îú‚îÄ‚îÄ manage.py                      # Django CLI
‚îú‚îÄ‚îÄ pyproject.toml                 # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—É
‚îú‚îÄ‚îÄ requirements.txt               # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ .env.example                   # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
```

---

## Django –î–æ–¥–∞—Ç–∫–∏

### 1. `apps.forum` - –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –§–æ—Ä—É–º—É

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ñ–æ—Ä—É–º—É - –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, —Ç–æ–ø—ñ–∫–∏, –ø–æ—Å—Ç–∏, –º–æ–¥–µ—Ä–∞—Ü—ñ—è

**–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **Category** - –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —ñ—î—Ä–∞—Ä—Ö—ñ—ó (–±–∞—Ç—å–∫–æ-–Ω–∞—â–∞–¥–æ–∫)
- **Topic** - —Ç–µ–º–∏ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –∑ —Å–∏—Å—Ç–µ–º–æ—é –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- **Post** - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Ç–µ–º–∞—Ö
- **ModerationAction** - —ñ—Å—Ç–æ—Ä—ñ—è –¥—ñ–π –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

**–ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –Ü—î—Ä–∞—Ä—Ö—ñ—á–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–Ω–µ–æ–±–º–µ–∂–µ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å)
- –ú–æ–¥–µ—Ä–∞—Ü—ñ—è —Ç–æ–ø—ñ–∫—ñ–≤ (PENDING ‚Üí APPROVED/REJECTED)
- Rich text —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ CKEditor 5
- –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–æ–ø—ñ–∫—ñ–≤
- –Ü—Å—Ç–æ—Ä—ñ—è –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

### 2. `apps.users` - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è, –ø—Ä–æ—Ñ—ñ–ª—ñ, —Ä–æ–ª—å–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞

**–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- **Role** - –≤–∏–∑–Ω–∞—á–µ–Ω—ñ —Ä–æ–ª—ñ –∑ —Ä—ñ–≤–Ω—è–º–∏ —Ç–∞ –ø—Ä–∞–≤–∞–º–∏
- **Profile** - —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –≤—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ü—Ä–æ—Ñ—ñ–ª—ñ –∑ –∞–≤–∞—Ç–∞—Ä–∞–º–∏ —Ç–∞ –±—ñ–æ–≥—Ä–∞—Ñ—ñ—î—é
- 6 –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö —Ä–æ–ª–µ–π
- 8 —Ç–∏–ø—ñ–≤ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- –ë–∞–Ω/—Ä–æ–∑–±–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

---

## –ú–æ–¥–µ–ª—ñ –î–∞–Ω–∏—Ö —Ç–∞ –ó–≤'—è–∑–∫–∏

### apps.forum.models

#### Model: Category (–ö–∞—Ç–µ–≥–æ—Ä—ñ—è)
```python
class Category(models.Model):
    name = CharField(max_length=100, unique=True)
    description = TextField(blank=True)
    parent = ForeignKey('self', null=True, blank=True, on_delete=CASCADE, related_name='subcategories')
    created_at = DateTimeField(auto_now_add=True)
```

**–ó–≤'—è–∑–∫–∏:**
- `parent` ‚Üí Category (—Å–∞–º–æ–ø–æ—Å–∏–ª–∞–Ω–Ω—è) - –¥–æ–∑–≤–æ–ª—è—î —ñ—î—Ä–∞—Ä—Ö—ñ—é
- `subcategories` (reverse) - –≤—Å—ñ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `topics` (reverse) - –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

**–ú–µ—Ç–æ–¥–∏:**
- `get_breadcrumbs()` - —Ö–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- `get_all_topics()` - –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏ –≤–∫–ª—é—á–∞—é—á–∏ –∑ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `get_all_subcategories()` - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—Å—ñ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `get_level()` - —Ä—ñ–≤–µ–Ω—å –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó

#### Model: Topic (–¢–æ–ø—ñ–∫/–¢–µ–º–∞)
```python
class Topic(models.Model):
    PENDING = 'pending'
    APPROVED = 'approved'
    REJECTED = 'rejected'
    STATUS_CHOICES = [...]

    title = CharField(max_length=200)
    category = ForeignKey(Category, on_delete=CASCADE, related_name='topics')
    author = ForeignKey(User, on_delete=CASCADE, related_name='topics')
    created_at = DateTimeField(auto_now_add=True)
    updated_at = DateTimeField(auto_now=True)
    is_pinned = BooleanField(default=False)
    is_closed = BooleanField(default=False)
    views = IntegerField(default=0)
    status = CharField(max_length=20, choices=STATUS_CHOICES, default=PENDING)
    moderated_by = ForeignKey(User, null=True, blank=True, on_delete=SET_NULL, related_name='moderated_topics')
    moderated_at = DateTimeField(null=True, blank=True)
    moderation_comment = TextField(blank=True)
```

**–ó–≤'—è–∑–∫–∏:**
- `category` ‚Üí Category - –∫–∞—Ç–µ–≥–æ—Ä—ñ—è —Ç–æ–ø—ñ–∫—É
- `author` ‚Üí User - –∞–≤—Ç–æ—Ä —Ç–æ–ø—ñ–∫—É
- `moderated_by` ‚Üí User - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä (SET_NULL –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ)
- `posts` (reverse) - –≤—Å—ñ –ø–æ—Å—Ç–∏ –≤ —Ç–æ–ø—ñ–∫—É
- `moderation_actions` (reverse) - —ñ—Å—Ç–æ—Ä—ñ—è –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

**–ú–µ—Ç–æ–¥–∏:**
- `get_posts_count()` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤
- `get_last_post()` - –æ—Å—Ç–∞–Ω–Ω—ñ–π –ø–æ—Å—Ç

**–Ü–Ω–¥–µ–∫—Å–∏:**
- `(status, -created_at)` - –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —á–µ—Ä–≥–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

**–°—Ç–∞—Ç—É—Å–∏ —Ç–æ–ø—ñ–∫—É:**
1. **PENDING** - –æ—á—ñ–∫—É—î –º–æ–¥–µ—Ä–∞—Ü—ñ—ó (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ)
2. **APPROVED** - —Å—Ö–≤–∞–ª–µ–Ω–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º
3. **REJECTED** - –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è PENDING –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å –∑–∞–∫—Ä—ñ–ø–ª—è—Ç–∏ (pin) —Ç–æ–ø—ñ–∫–∏
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ —Ç–æ–ø—ñ–∫–∏ (–∑–∞–±–æ—Ä–æ–Ω–∞ –Ω–æ–≤–∏—Ö –ø–æ—Å—Ç—ñ–≤)
- –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤

#### Model: Post (–ü–æ—Å—Ç/–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
```python
class Post(models.Model):
    topic = ForeignKey(Topic, on_delete=CASCADE, related_name='posts')
    author = ForeignKey(User, on_delete=CASCADE, related_name='posts')
    content = CKEditor5Field(config_name='default')
    created_at = DateTimeField(auto_now_add=True)
    updated_at = DateTimeField(auto_now=True)
```

**–ó–≤'—è–∑–∫–∏:**
- `topic` ‚Üí Topic - —Ç–æ–ø—ñ–∫ –¥–æ —è–∫–æ–≥–æ –Ω–∞–ª–µ–∂–∏—Ç—å –ø–æ—Å—Ç
- `author` ‚Üí User - –∞–≤—Ç–æ—Ä –ø–æ—Å—Ç–∞

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- Rich text –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ CKEditor 5
- –ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —Ç–æ–ø—ñ–∫—É –∞–±–æ –∞–≤—Ç–æ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –º—ñ—Ç–∫–∏ —á–∞—Å—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è

#### Model: ModerationAction (–î—ñ—è –ú–æ–¥–µ—Ä–∞—Ü—ñ—ó)
```python
class ModerationAction(models.Model):
    APPROVE = 'approve'
    REJECT = 'reject'
    ACTION_CHOICES = [...]

    topic = ForeignKey(Topic, on_delete=CASCADE, related_name='moderation_actions')
    moderator = ForeignKey(User, on_delete=CASCADE)
    action = CharField(max_length=20, choices=ACTION_CHOICES)
    comment = TextField(blank=True)
    created_at = DateTimeField(auto_now_add=True)
```

**–ó–≤'—è–∑–∫–∏:**
- `topic` ‚Üí Topic - –º–æ–¥–µ—Ä–æ–≤–∞–Ω–∏–π —Ç–æ–ø—ñ–∫
- `moderator` ‚Üí User - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä —â–æ –≤–∏–∫–æ–Ω–∞–≤ –¥—ñ—é

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –¢—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ
- –ê—É–¥–∏—Ç-–ª–æ–≥ –≤—Å—ñ—Ö –¥—ñ–π –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –ó–±–µ—Ä—ñ–≥–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

### apps.users.models

#### Model: Role (–†–æ–ª—å)
```python
class Role(models.Model):
    OWNER = 'OWNER'
    ADMINISTRATOR = 'ADMINISTRATOR'
    MODERATOR = 'MODERATOR'
    VIP = 'VIP'
    MEMBER = 'MEMBER'
    BANNED = 'BANNED'

    name = CharField(max_length=50, unique=True)
    level = IntegerField(default=0)
    color = CharField(max_length=20, default='secondary')

    # 8 –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
    can_edit_any_post = BooleanField(default=False)
    can_delete_any_post = BooleanField(default=False)
    can_close_topics = BooleanField(default=False)
    can_pin_topics = BooleanField(default=False)
    can_manage_users = BooleanField(default=False)
    can_manage_categories = BooleanField(default=False)
    can_ban_users = BooleanField(default=False)
    can_moderate_topics = BooleanField(default=False)
```

**–Ü—î—Ä–∞—Ä—Ö—ñ—è —Ä–æ–ª–µ–π (–∑–∞ —Ä—ñ–≤–Ω–µ–º):**
1. **OWNER (100)** - –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –∫–æ–ª—ñ—Ä: danger (—á–µ—Ä–≤–æ–Ω–∏–π)
2. **ADMINISTRATOR (50)** - –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –±–µ–∑ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è, –∫–æ–ª—ñ—Ä: warning (–∂–æ–≤—Ç–∏–π)
3. **MODERATOR (30)** - –º–æ–¥–µ—Ä–∞—Ü—ñ—è —Ç–∞ –±–∞–∑–æ–≤–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è, –∫–æ–ª—ñ—Ä: success (–∑–µ–ª–µ–Ω–∏–π)
4. **VIP (20)** - –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ –æ—Å–æ–±–ª–∏–≤–∏–º —Å—Ç–∞—Ç—É—Å–æ–º, –∫–æ–ª—ñ—Ä: info (—Å–∏–Ω—ñ–π)
5. **MEMBER (10)** - –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º), –∫–æ–ª—ñ—Ä: secondary (—Å—ñ—Ä–∏–π)
6. **BANNED (0)** - –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –∫–æ–ª—ñ—Ä: dark (—á–æ—Ä–Ω–∏–π)

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É:**
- `can_edit_any_post` - —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤
- `can_delete_any_post` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤
- `can_close_topics` - –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–æ–ø—ñ–∫—ñ–≤
- `can_pin_topics` - –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤
- `can_manage_users` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- `can_manage_categories` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏
- `can_ban_users` - –±–∞–Ω/—Ä–æ–∑–±–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `can_moderate_topics` - –º–æ–¥–µ—Ä–∞—Ü—ñ—è —Ç–æ–ø—ñ–∫—ñ–≤ (—Å—Ö–≤–∞–ª–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è)

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ management command `init_roles`
- –†—ñ–≤–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —ñ—î—Ä–∞—Ä—Ö—ñ—ó
- –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–µ–π–¥–∂—ñ–≤ –≤ UI

#### Model: Profile (–ü—Ä–æ—Ñ—ñ–ª—å)
```python
class Profile(models.Model):
    user = OneToOneField(User, on_delete=CASCADE)
    role = ForeignKey(Role, on_delete=SET_NULL, null=True, blank=True, related_name='profiles')
    avatar = ImageField(upload_to='avatars/', blank=True, null=True)
    bio = CKEditor5Field(config_name='simple', blank=True, null=True)
    location = CharField(max_length=100, blank=True)
    website = URLField(max_length=200, blank=True)
    joined_date = DateTimeField(auto_now_add=True)
```

**–ó–≤'—è–∑–∫–∏:**
- `user` ‚Üí User (OneToOne) - –æ–¥–∏–Ω –ø—Ä–æ—Ñ—ñ–ª—å –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `role` ‚Üí Role - —Ä–æ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (SET_NULL –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ —Ä–æ–ª—ñ)

**–ú–µ—Ç–æ–¥–∏:**
- `has_permission(permission_name: str) ‚Üí bool` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
- `is_staff() ‚Üí bool` - —á–∏ —î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- `is_banned() ‚Üí bool` - —á–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- `get_posts_count() ‚Üí int` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `get_topics_count() ‚Üí int` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (—á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª)
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏—Å–≤–æ—é—î—Ç—å—Å—è —Ä–æ–ª—å MEMBER
- –ê–≤–∞—Ç–∞—Ä –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `media/avatars/`
- Bio –∑ –ø—Ä–æ—Å—Ç–∏–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º (CKEditor simple config)

**–°–∏–≥–Ω–∞–ª–∏ (signals.py):**
```python
@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    """–°—Ç–≤–æ—Ä—é—î –ø—Ä–æ—Ñ—ñ–ª—å –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ä–æ–ª–ª—é MEMBER"""

@receiver(post_save, sender=User)
def save_user_profile(sender, instance, **kwargs):
    """–ó–±–µ—Ä—ñ–≥–∞—î –ø—Ä–æ—Ñ—ñ–ª—å –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"""

@receiver(post_save, sender=Profile)
def update_user_staff_status(sender, instance, created, **kwargs):
    """–û–Ω–æ–≤–ª—é—î is_staff —Ç–∞ is_superuser –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–ª—ñ"""
    # OWNER ‚Üí is_superuser=True, is_staff=True
    # ADMINISTRATOR ‚Üí is_staff=True, is_superuser=False
    # –Ü–Ω—à—ñ —Ä–æ–ª—ñ ‚Üí is_staff=False, is_superuser=False
```

### –î—ñ–∞–≥—Ä–∞–º–∞ –ó–≤'—è–∑–∫—ñ–≤ –ú–æ–¥–µ–ª–µ–π

```
User (Django built-in)
  ‚Üì OneToOne
Profile
  ‚Üì ForeignKey
Role

User
  ‚Üì ForeignKey (author)
Topic
  ‚Üì ForeignKey (category)
Category
  ‚Üì ForeignKey (parent, self-reference)
Category

Topic
  ‚Üì ForeignKey (topic)
Post

Topic
  ‚Üì ForeignKey (topic)
ModerationAction

User
  ‚Üì ForeignKey (author)
Post

User
  ‚Üì ForeignKey (moderator)
ModerationAction

User
  ‚Üì ForeignKey (moderated_by)
Topic
```

---

## –û—Å–Ω–æ–≤–Ω–∏–π –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 1. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

#### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è:** username, email, password + –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
- **–í—Ö—ñ–¥:** username/password —á–µ—Ä–µ–∑ —Å–µ—Å—ñ—ó Django
- **–í–∏—Ö—ñ–¥:** –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Å–µ—Å—ñ—ó
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é:** –∑ —Ä–æ–ª–ª—é MEMBER –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

#### –ü—Ä–æ—Ñ—ñ–ª—ñ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **–ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ—Ñ—ñ–ª—é:** username, —Ä–æ–ª—å (–∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –±–µ–π–¥–∂–µ–º), –∞–≤–∞—Ç–∞—Ä, –±—ñ–æ, –ª–æ–∫–∞—Ü—ñ—è, —Å–∞–π—Ç
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤, –¥–∞—Ç–∞ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è
- **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é:** –∑–º—ñ–Ω–∞ –∞–≤–∞—Ç–∞—Ä–∞, –±—ñ–æ, –ª–æ–∫–∞—Ü—ñ—ó, —Å–∞–π—Ç—É
- **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä—ñ–≤:** —á–µ—Ä–µ–∑ Pillow (–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ `media/avatars/`)

#### –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –§–æ—Ä—É–º—É
- **–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞:** —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π + –Ω–µ–¥–∞–≤–Ω—ñ —Ç–æ–ø—ñ–∫–∏ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–ü–µ—Ä–µ–≥–ª—è–¥ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π:** —Ç–æ–ø—ñ–∫–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó + –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- **–ß–∏—Ç–∞–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤:** –ø–æ—Å—Ç–∏ –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é
- **–•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏:** –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ —ñ—î—Ä–∞—Ä—Ö—ñ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ö–æ–Ω—Ç–µ–Ω—Ç—É
- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—É:**
  - –í–∏–±—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó (–∑ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º —ñ—î—Ä–∞—Ä—Ö—ñ—ó)
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–æ–ø—ñ–∫—É
  - –ù–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–æ—Å—Ç
  - –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ PENDING
- **–í—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–æ–ø—ñ–∫–∞—Ö:**
  - Rich text —Ä–µ–¥–∞–∫—Ç–æ—Ä CKEditor 5
  - –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ: –∑–∞–≥–æ–ª–æ–≤–∫–∏, bold, italic, —Å–ø–∏—Å–∫–∏, –ø–æ—Å–∏–ª–∞–Ω–Ω—è, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, —Ç–∞–±–ª–∏—Ü—ñ
- **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –ø–æ—Å—Ç—ñ–≤:**
  - –ê–≤—Ç–æ—Ä –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Å–≤–æ—ó –ø–æ—Å—Ç–∏
  - –ú—ñ—Ç–∫–∞ "–≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ" –∑ —á–∞—Å–æ–º
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –ø–æ—Å—Ç—ñ–≤:**
  - –ó –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º

### 2. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

#### –ß–µ—Ä–≥–∞ –ú–æ–¥–µ—Ä–∞—Ü—ñ—ó
- **–ü–µ—Ä–µ–≥–ª—è–¥:** –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏ –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º PENDING
- **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:** –ø–æ –¥–∞—Ç—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
- **–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:** –∞–≤—Ç–æ—Ä, –∫–∞—Ç–µ–≥–æ—Ä—ñ—è, –¥–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

#### –î—ñ—ó –ú–æ–¥–µ—Ä–∞—Ü—ñ—ó –¢–æ–ø—ñ–∫—ñ–≤
- **–°—Ö–≤–∞–ª–µ–Ω–Ω—è (Approve):**
  - –ó–º—ñ–Ω—é—î —Å—Ç–∞—Ç—É—Å –Ω–∞ APPROVED
  - –í—Å—Ç–∞–Ω–æ–≤–ª—é—î moderated_by, moderated_at
  - –°—Ç–≤–æ—Ä—é—î ModerationAction –∑–∞–ø–∏—Å
  - –¢–æ–ø—ñ–∫ —Å—Ç–∞—î –≤–∏–¥–∏–º–∏–º –≤—Å—ñ–º
- **–í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è (Reject):**
  - –ó–º—ñ–Ω—é—î —Å—Ç–∞—Ç—É—Å –Ω–∞ REJECTED
  - –í–∏–º–∞–≥–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä –∑ –ø—Ä–∏—á–∏–Ω–æ—é
  - –°—Ç–≤–æ—Ä—é—î ModerationAction –∑–∞–ø–∏—Å
  - –¢–æ–ø—ñ–∫ –≤–∏–¥–∏–º–∏–π —Ç—ñ–ª—å–∫–∏ –∞–≤—Ç–æ—Ä—É

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¢–æ–ø—ñ–∫–∞–º–∏
- **–ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è (Pin):**
  - –¢–æ–ø—ñ–∫ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –∑–≤–µ—Ä—Ö—É —Å–ø–∏—Å–∫—É
  - –í—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä (—ñ–∫–æ–Ω–∫–∞)
- **–í—ñ–¥–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è (Unpin):**
  - –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
- **–ó–∞–∫—Ä–∏—Ç—Ç—è (Close):**
  - –ó–∞–±–æ—Ä–æ–Ω–∞ –Ω–æ–≤–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
  - –í—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
- **–í—ñ–¥–∫—Ä–∏—Ç—Ç—è (Open):**
  - –î–æ–∑–≤—ñ–ª –Ω–∞ –Ω–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ü–æ—Å—Ç–∞–º–∏
- **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤:** –∑ –ø—Ä–∞–≤–æ–º `can_edit_any_post`
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤:** –∑ –ø—Ä–∞–≤–æ–º `can_delete_any_post`

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- **–ë–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**
  - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª—ñ BANNED
  - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–æ–ø—ñ–∫–∏/–ø–æ—Å—Ç–∏
  - –î–æ—Å—Ç—É–ø —Ç—ñ–ª—å–∫–∏ –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è
- **–†–æ–∑–±–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**
  - –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó —Ä–æ–ª—ñ –∞–±–æ MEMBER
  - –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π

### 3. –ü–æ—à—É–∫ —Ç–∞ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

#### –ü–æ—à—É–∫ –ø–æ –ö–æ–Ω—Ç–µ–Ω—Ç—É
- **–ü–æ—à—É–∫ –ø–æ —Ç–æ–ø—ñ–∫–∞—Ö:**
  - Full-text search –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º
  - –†–µ–≥—ñ—Å—Ç—Ä–æ–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π
- **–ü–æ—à—É–∫ –ø–æ –ø–æ—Å—Ç–∞—Ö:**
  - Full-text search –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
  - –†–µ–≥—ñ—Å—Ç—Ä–æ–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π
- **–û–±'—î–¥–Ω–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:**
  - –¢–æ–ø—ñ–∫–∏ —Ç–∞ –ø–æ—Å—Ç–∏ –≤ –æ–¥–Ω–æ–º—É —Å–ø–∏—Å–∫—É
  - DISTINCT –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
  - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

#### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –°—Ç–∞—Ç—É—Å–æ–º
- **–ê–Ω–æ–Ω—ñ–º–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:** —Ç—ñ–ª—å–∫–∏ APPROVED —Ç–æ–ø—ñ–∫–∏
- **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:** APPROVED + –≤–ª–∞—Å–Ω—ñ —Ç–æ–ø—ñ–∫–∏ (–±—É–¥—å-—è–∫–∏–π —Å—Ç–∞—Ç—É—Å)
- **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏:** –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏ (PENDING, APPROVED, REJECTED)

### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –ú–µ—Ç—Ä–∏–∫–∏

#### –ì–ª–æ–±–∞–ª—å–Ω–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–¥–æ–º–∞—à–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞)
- –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ö–≤–∞–ª–µ–Ω–∏—Ö —Ç–æ–ø—ñ–∫—ñ–≤
- –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤
- –û—Å—Ç–∞–Ω–Ω—ñ —Ç–æ–ø—ñ–∫–∏ (–∑ –¥–∞—Ç–æ—é —Ç–∞ –∞–≤—Ç–æ—Ä–æ–º)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø—Ä–æ—Ñ—ñ–ª—å)
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ç–æ–ø—ñ–∫—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—Ö –ø–æ—Å—Ç—ñ–≤
- –î–∞—Ç–∞ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¢–æ–ø—ñ–∫—É
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- –î–∞—Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –ê–≤—Ç–æ—Ä –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

### 5. –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–π –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª (Django Admin)

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –†–æ–ª—è–º–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ä–æ–ª–µ–π
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É (8 —Ç–∏–ø—ñ–≤)
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä—ñ–≤–Ω—ñ–≤ —Ç–∞ –∫–æ–ª—å–æ—Ä—ñ–≤

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- Inline —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—ñ–≤
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª–µ–π
- –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ö–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ—î—Ä–∞—Ä—Ö—ñ—ó
- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¢–æ–ø—ñ–∫–∞–º–∏
- Bulk actions: pin/unpin, close/open, approve/reject
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Å—Ç–∞—Ç—É—Å—É, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, –∞–≤—Ç–æ—Ä—É
- –ü–æ—à—É–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É

#### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ü–æ—Å—Ç–∞–º–∏
- –ü–æ—à—É–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Ç–æ–ø—ñ–∫—É, –∞–≤—Ç–æ—Ä—É
- Inline —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –≤ —Ç–æ–ø—ñ–∫–∞—Ö

#### –ê—É–¥–∏—Ç –ú–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –ü–µ—Ä–µ–≥–ª—è–¥ ModerationAction (—Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è)
- –Ü—Å—Ç–æ—Ä—ñ—è –≤—Å—ñ—Ö –¥—ñ–π –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Ç–æ–ø—ñ–∫—É, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É

---

## –°–∏—Å—Ç–µ–º–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –ü—Ä–∞–≤ –î–æ—Å—Ç—É–ø—É

### Django –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

**–ú–æ–¥–µ–ª—å:** Django User (–≤–±—É–¥–æ–≤–∞–Ω–∞)

**–ú–µ—Ç–æ–¥:** Session-based authentication

**–ü—Ä–æ—Ü–µ—Å –≤—Ö–æ–¥—É:**
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å username/password
2. Django –ø–µ—Ä–µ–≤—ñ—Ä—è—î credentials
3. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Å–µ—Å—ñ—è
4. Session ID –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ cookie

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- `LOGIN_URL = 'users:login'`
- `LOGIN_REDIRECT_URL = 'forum:home'`
- `LOGOUT_REDIRECT_URL = 'forum:home'`

### –ö–∞—Å—Ç–æ–º–Ω–∞ –†–æ–ª—å–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞

#### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ RBAC (Role-Based Access Control)

```
User ‚Üí Profile ‚Üí Role ‚Üí Permissions (8 —Ç–∏–ø—ñ–≤)
```

#### 6 –ü–æ–ø–µ—Ä–µ–¥–Ω—å–æ –í–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –†–æ–ª–µ–π

1. **OWNER (—Ä—ñ–≤–µ–Ω—å 100)**
   - –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ—é
   - –í—Å—ñ 8 –ø—Ä–∞–≤: ‚úì
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ: `is_superuser=True`, `is_staff=True`
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: danger (—á–µ—Ä–≤–æ–Ω–∏–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –≤–ª–∞—Å–Ω–∏–∫/–≥–æ–ª–æ–≤–Ω–∏–π –∞–¥–º—ñ–Ω

2. **ADMINISTRATOR (—Ä—ñ–≤–µ–Ω—å 50)**
   - –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –±–µ–∑ superuser
   - –í—Å—ñ 8 –ø—Ä–∞–≤: ‚úì
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ: `is_staff=True`, `is_superuser=False`
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: warning (–∂–æ–≤—Ç–∏–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º–∏

3. **MODERATOR (—Ä—ñ–≤–µ–Ω—å 30)**
   - –ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ –±–∞–∑–æ–≤–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
   - –ü—Ä–∞–≤–∞: ‚úì edit_any_post, ‚úì delete_any_post, ‚úì close_topics, ‚úì pin_topics, ‚úì ban_users, ‚úì moderate_topics
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ: `is_staff=False`
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: success (–∑–µ–ª–µ–Ω–∏–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –º–æ–¥–µ—Ä–∞—Ç–æ—Ä —Ñ–æ—Ä—É–º—É

4. **VIP (—Ä—ñ–≤–µ–Ω—å 20)**
   - –û—Å–æ–±–ª–∏–≤–∏–π —Å—Ç–∞—Ç—É—Å –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø—Ä–∞–≤
   - –í—Å—ñ –ø—Ä–∞–≤–∞: ‚úó
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: info (—Å–∏–Ω—ñ–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –ø–æ—á–µ—Å–Ω—ñ/–ø—Ä–µ–º—ñ—É–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

5. **MEMBER (—Ä—ñ–≤–µ–Ω—å 10)**
   - –ó–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–î–ï–§–û–õ–¢–Ω–∞ —Ä–æ–ª—å)
   - –í—Å—ñ –ø—Ä–∞–≤–∞: ‚úó
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: secondary (—Å—ñ—Ä–∏–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –≤—Å—ñ –Ω–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

6. **BANNED (—Ä—ñ–≤–µ–Ω—å 0)**
   - –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
   - –í—Å—ñ –ø—Ä–∞–≤–∞: ‚úó
   - –ö–æ–ª—ñ—Ä –±–µ–π–¥–∂–∞: dark (—á–æ—Ä–Ω–∏–π)
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

#### 8 –¢–∏–ø—ñ–≤ –ü—Ä–∞–≤ –î–æ—Å—Ç—É–ø—É

| –ü—Ä–∞–≤–æ | –û–ø–∏—Å | OWNER | ADMIN | MODERATOR | VIP | MEMBER | BANNED |
|-------|------|-------|-------|-----------|-----|--------|--------|
| `can_edit_any_post` | –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |
| `can_delete_any_post` | –í–∏–¥–∞–ª–µ–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–æ—Å—Ç—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |
| `can_close_topics` | –ó–∞–∫—Ä–∏—Ç—Ç—è —Ç–æ–ø—ñ–∫—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |
| `can_pin_topics` | –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |
| `can_manage_users` | –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó | ‚úó |
| `can_manage_categories` | –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó | ‚úó |
| `can_ban_users` | –ë–∞–Ω/—Ä–æ–∑–±–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |
| `can_moderate_topics` | –ú–æ–¥–µ—Ä–∞—Ü—ñ—è —Ç–æ–ø—ñ–∫—ñ–≤ | ‚úì | ‚úì | ‚úì | ‚úó | ‚úó | ‚úó |

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ü—Ä–∞–≤ –î–æ—Å—Ç—É–ø—É

**–í Python (views.py):**
```python
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ –ø—Ä–æ—Ñ—ñ–ª—é
if request.user.profile.has_permission('can_moderate_topics'):
    # –î–æ–∑–≤–æ–ª–∏—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—é

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è UserPassesTestMixin
class TopicApproveView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        return self.request.user.profile.has_permission('can_moderate_topics')
```

**–í Template (HTML):**
```django
{# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä—É #}
{% load user_tags %}

{% if request.user|has_perm:"can_moderate_topics" %}
    <a href="{% url 'forum:moderation_queue' %}">–ß–µ—Ä–≥–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó</a>
{% endif %}
```

**–õ–æ–≥—ñ–∫–∞ Profile.has_permission():**
```python
def has_permission(self, permission_name):
    """–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –º–∞—î –ø—Ä–æ—Ñ—ñ–ª—å –ø–µ–≤–Ω–µ –ø—Ä–∞–≤–æ"""
    if not self.role:
        return False
    if self.role.name == 'BANNED':
        return False
    return getattr(self.role, permission_name, False)
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è Django Staff/Superuser

**–°–∏–≥–Ω–∞–ª (post_save –Ω–∞ Profile):**
```python
@receiver(post_save, sender=Profile)
def update_user_staff_status(sender, instance, created, **kwargs):
    user = instance.user
    if instance.role:
        if instance.role.name == 'OWNER':
            user.is_superuser = True
            user.is_staff = True
        elif instance.role.name == 'ADMINISTRATOR':
            user.is_staff = True
            user.is_superuser = False
        else:
            user.is_staff = False
            user.is_superuser = False
    user.save()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- OWNER ‚Üí –¥–æ—Å—Ç—É–ø –¥–æ Django Admin –∑ –ø–æ–≤–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏
- ADMINISTRATOR ‚Üí –¥–æ—Å—Ç—É–ø –¥–æ Django Admin
- –Ü–Ω—à—ñ —Ä–æ–ª—ñ ‚Üí –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ Django Admin

#### –ó–∞—Ö–∏—Å—Ç View —á–µ—Ä–µ–∑ Mixins

**LoginRequiredMixin:**
```python
class TopicCreateView(LoginRequiredMixin, CreateView):
    # –í–∏–º–∞–≥–∞—î –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
```

**UserPassesTestMixin:**
```python
class TopicApproveView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        return self.request.user.profile.has_permission('can_moderate_topics')
```

**–ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è:**
```python
class ToggleBanView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        return self.request.user.profile.has_permission('can_ban_users')

    def post(self, request, username):
        # –õ–æ–≥—ñ–∫–∞ –±–∞–Ω—É/—Ä–æ–∑–±–∞–Ω—É
```

#### –ü—Ä–∞–≤–∏–ª–∞ –í–∏–¥–∏–º–æ—Å—Ç—ñ –ö–æ–Ω—Ç–µ–Ω—Ç—É

**–¢–æ–ø—ñ–∫–∏ - FilterMixin –≤ views.py:**
```python
def filter_queryset(queryset, user):
    if user.is_authenticated:
        if user.profile.has_permission('can_moderate_topics'):
            # –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏ –±–∞—á–∞—Ç—å –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏
            return queryset
        else:
            # –ó–≤–∏—á–∞–π–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±–∞—á–∞—Ç—å APPROVED + –≤–ª–∞—Å–Ω—ñ
            return queryset.filter(
                Q(status='approved') | Q(author=user)
            )
    else:
        # –ê–Ω–æ–Ω—ñ–º–Ω—ñ –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ APPROVED
        return queryset.filter(status='approved')
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ê–Ω–æ–Ω—ñ–º–Ω—ñ:** APPROVED —Ç–æ–ø—ñ–∫–∏
- **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ:** APPROVED + —Å–≤–æ—ó (PENDING/REJECTED)
- **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä–∏:** –≤—Å—ñ —Ç–æ–ø—ñ–∫–∏

#### –û–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è BANNED –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

**–í views.py:**
```python
class TopicCreateView(LoginRequiredMixin, CreateView):
    def dispatch(self, request, *args, **kwargs):
        if request.user.profile.is_banned():
            messages.error(request, "–í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–æ–ø—ñ–∫–∏.")
            return redirect('forum:home')
        return super().dispatch(request, *args, **kwargs)
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```python
def is_banned(self):
    return self.role and self.role.name == 'BANNED'
```

---

## URL –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è

### –ì–æ–ª–æ–≤–Ω–∏–π config/urls.py

```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('apps.forum.urls')),
    path('', include('apps.users.urls')),
    path('ckeditor5/', include('django_ckeditor_5.urls')),
]

# –Ø–∫—â–æ DEBUG - –¥–æ–¥–∞—Ç–∫–æ–≤–æ serve media files
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

### apps.forum.urls (namespace='forum')

| URL Pattern | View | Name | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|-------------|------|------|-------------|
| `/` | HomeView | `home` | –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ñ–æ—Ä—É–º—É |
| `/category/<int:pk>/` | CategoryDetailView | `category_detail` | –¢–æ–ø—ñ–∫–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó |
| `/topic/<int:pk>/` | TopicDetailView | `topic_detail` | –ü–µ—Ä–µ–≥–ª—è–¥ —Ç–æ–ø—ñ–∫—É –∑ –ø–æ—Å—Ç–∞–º–∏ |
| `/topic/create/` | TopicCreateView | `topic_create` | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–ø—ñ–∫—É |
| `/topic/<int:pk>/edit/` | TopicUpdateView | `topic_update` | –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–æ–ø—ñ–∫—É |
| `/topic/<int:topic_pk>/reply/` | PostCreateView | `post_create` | –í—ñ–¥–ø–æ–≤—ñ–¥—å –≤ —Ç–æ–ø—ñ–∫—É |
| `/post/<int:pk>/edit/` | PostUpdateView | `post_update` | –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞ |
| `/post/<int:pk>/delete/` | PostDeleteView | `post_delete` | –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ—Å—Ç–∞ |
| `/search/` | SearchView | `search` | –ü–æ—à—É–∫ –ø–æ —Ñ–æ—Ä—É–º—É |
| `/moderation/` | ModerationQueueView | `moderation_queue` | –ß–µ—Ä–≥–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó |
| `/moderation/topic/<int:pk>/approve/` | TopicApproveView | `topic_approve` | –°—Ö–≤–∞–ª–∏—Ç–∏ —Ç–æ–ø—ñ–∫ |
| `/moderation/topic/<int:pk>/reject/` | TopicRejectView | `topic_reject` | –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ —Ç–æ–ø—ñ–∫ |

### apps.users.urls (namespace='users')

| URL Pattern | View | Name | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|-------------|------|------|-------------|
| `/users/register/` | RegisterView | `register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| `/users/login/` | UserLoginView | `login` | –í—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| `/users/logout/` | UserLogoutView | `logout` | –í–∏—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| `/users/profile/edit/` | ProfileUpdateView | `profile_update` | –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é |
| `/users/profile/<str:username>/` | ProfileView | `profile` | –ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–æ—Ñ—ñ–ª—é |
| `/users/profile/<str:username>/toggle-ban/` | ToggleBanView | `toggle_ban` | –ë–∞–Ω/—Ä–æ–∑–±–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |

### CKEditor URLs

| URL Pattern | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|-------------|-------------|
| `/ckeditor5/upload/` | –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä |
| `/ckeditor5/browse/` | –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ |

### –ü—Ä–∏–∫–ª–∞–¥–∏ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ Template

```django
{# –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É #}
<a href="{% url 'forum:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a>

{# –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é #}
<a href="{% url 'forum:category_detail' category.pk %}">{{ category.name }}</a>

{# –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–æ–ø—ñ–∫ #}
<a href="{% url 'forum:topic_detail' topic.pk %}">{{ topic.title }}</a>

{# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—É #}
<a href="{% url 'forum:topic_create' %}">–ù–æ–≤–∏–π —Ç–æ–ø—ñ–∫</a>

{# –í—ñ–¥–ø–æ–≤—ñ–¥—å –≤ —Ç–æ–ø—ñ–∫ #}
<a href="{% url 'forum:post_create' topic.pk %}">–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏</a>

{# –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ #}
<a href="{% url 'users:profile' user.username %}">{{ user.username }}</a>

{# –ß–µ—Ä–≥–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ñ–≤) #}
{% if request.user|has_perm:"can_moderate_topics" %}
    <a href="{% url 'forum:moderation_queue' %}">–ú–æ–¥–µ—Ä–∞—Ü—ñ—è</a>
{% endif %}
```

---

## –§–æ—Ä–º–∏ —Ç–∞ –í–∞–ª—ñ–¥–∞—Ü—ñ—è

### apps.forum.forms

#### TopicCreateForm
```python
class TopicCreateForm(forms.ModelForm):
    class Meta:
        model = Topic
        fields = ['title', 'category', 'content']
        widgets = {
            'content': CKEditor5Widget(config_name='default')
        }

    # –ö–∞—Å—Ç–æ–º–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ —ñ—î—Ä–∞—Ä—Ö—ñ—î—é
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # –í—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ–π
        choices = []
        for category in Category.objects.all():
            indent = '‚Äî' * category.get_level()
            choices.append((category.id, f"{indent} {category.name}"))
        self.fields['category'].choices = choices
```

**–ü–æ–ª—è:**
- `title` - CharField, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ (max 200 chars)
- `category` - ForeignKey, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ (–≤–∏–±—ñ—Ä –∑—ñ —Å–ø–∏—Å–∫—É)
- `content` - CKEditor5Field, –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ (–ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–æ—Å—Ç)

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–æ–ª—ñ–≤
- –£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å –ù–ï –≤–∏–º–∞–≥–∞—î—Ç—å—Å—è –¥–ª—è title
- –ö–∞—Ç–µ–≥–æ—Ä—ñ—è –ø–æ–≤–∏–Ω–Ω–∞ —ñ—Å–Ω—É–≤–∞—Ç–∏

#### PostCreateForm
```python
class PostCreateForm(forms.ModelForm):
    class Meta:
        model = Post
        fields = ['content']
        widgets = {
            'content': CKEditor5Widget(config_name='default')
        }
```

**–ü–æ–ª—è:**
- `content` - CKEditor5Field, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º
- Rich text –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è CKEditor

### apps.users.forms

#### UserRegisterForm
```python
class UserRegisterForm(UserCreationForm):
    email = forms.EmailField()

    class Meta:
        model = User
        fields = ['username', 'email', 'password1', 'password2']

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # –î–æ–¥–∞–≤–∞–Ω–Ω—è Bootstrap –∫–ª–∞—Å—ñ–≤
        for field in self.fields.values():
            field.widget.attrs['class'] = 'form-control'
```

**–ü–æ–ª—è:**
- `username` - CharField, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ, —É–Ω—ñ–∫–∞–ª—å–Ω–µ
- `email` - EmailField, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- `password1` - CharField, –ø–∞—Ä–æ–ª—å
- `password2` - CharField, –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- Username —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å (Django default)
- Email —Ñ–æ—Ä–º–∞—Ç
- –ü–∞—Ä–æ–ª—ñ –ø–æ–≤–∏–Ω–Ω—ñ —Å–ø—ñ–≤–ø–∞–¥–∞—Ç–∏
- –ü–∞—Ä–æ–ª—å –º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤ (Django password validators)

#### UserLoginForm
```python
class UserLoginForm(AuthenticationForm):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # Bootstrap –∫–ª–∞—Å–∏
        self.fields['username'].widget.attrs['class'] = 'form-control'
        self.fields['password'].widget.attrs['class'] = 'form-control'
```

**–ü–æ–ª—è:**
- `username` - CharField
- `password` - CharField (PasswordInput widget)

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ credentials —á–µ—Ä–µ–∑ Django auth backend

#### ProfileUpdateForm
```python
class ProfileUpdateForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ['avatar', 'bio', 'location', 'website']
        widgets = {
            'bio': CKEditor5Widget(config_name='simple')
        }
```

**–ü–æ–ª—è:**
- `avatar` - ImageField, –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- `bio` - CKEditor5Field (simple config), –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- `location` - CharField (max 100), –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- `website` - URLField (max 200), –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–µ

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- Avatar: —Ñ–æ—Ä–º–∞—Ç –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (Pillow –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)
- Website: –∫–æ—Ä–µ–∫—Ç–Ω–∏–π URL —Ñ–æ—Ä–º–∞—Ç
- Bio: –ø—Ä–æ—Å—Ç–∏–π rich text

#### UserUpdateForm
```python
class UserUpdateForm(forms.ModelForm):
    class Meta:
        model = User
        fields = ['username', 'email']
```

**–ü–æ–ª—è:**
- `username` - CharField, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- `email` - EmailField, –æ–±–æ–≤'—è–∑–∫–æ–≤–µ

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- Username —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å (–æ–∫—Ä—ñ–º –ø–æ—Ç–æ—á–Ω–æ–≥–æ)
- Email —Ñ–æ—Ä–º–∞—Ç

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –§–æ—Ä–º –≤ Views

**CreateView –ø—Ä–∏–∫–ª–∞–¥:**
```python
class TopicCreateView(LoginRequiredMixin, CreateView):
    model = Topic
    form_class = TopicCreateForm

    def form_valid(self, form):
        form.instance.author = self.request.user
        form.instance.status = 'pending'  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ PENDING
        topic = form.save()

        # –Ø–∫—â–æ —î –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç - —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à–∏–π –ø–æ—Å—Ç
        if form.cleaned_data.get('content'):
            Post.objects.create(
                topic=topic,
                author=self.request.user,
                content=form.cleaned_data['content']
            )

        return super().form_valid(form)
```

**UpdateView –ø—Ä–∏–∫–ª–∞–¥:**
```python
class ProfileUpdateView(LoginRequiredMixin, UpdateView):
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        if self.request.POST:
            context['user_form'] = UserUpdateForm(self.request.POST, instance=self.request.user)
            context['profile_form'] = ProfileUpdateForm(
                self.request.POST,
                self.request.FILES,  # –î–ª—è –∞–≤–∞—Ç–∞—Ä–∞
                instance=self.request.user.profile
            )
        else:
            context['user_form'] = UserUpdateForm(instance=self.request.user)
            context['profile_form'] = ProfileUpdateForm(instance=self.request.user.profile)
        return context
```

---

## –®–∞–±–ª–æ–Ω–∏ —Ç–∞ UI

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Template

```
templates/
‚îú‚îÄ‚îÄ base.html                      # –ë–∞–∑–æ–≤–∏–π —à–∞–±–ª–æ–Ω –∑ navbar, footer
‚îú‚îÄ‚îÄ forum/
‚îÇ   ‚îú‚îÄ‚îÄ home.html                  # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ category_detail.html       # –°–ø–∏—Å–æ–∫ —Ç–æ–ø—ñ–∫—ñ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ topic_detail.html          # –¢–æ–ø—ñ–∫ –∑ –ø–æ—Å—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ topic_create.html          # –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ topic_update.html          # –§–æ—Ä–º–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–æ–ø—ñ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ post_create.html           # –§–æ—Ä–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
‚îÇ   ‚îú‚îÄ‚îÄ post_update.html           # –§–æ—Ä–º–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ post_delete.html           # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ search.html                # –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ—à—É–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ moderation_queue.html      # –ß–µ—Ä–≥–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ users/
    ‚îú‚îÄ‚îÄ login.html                 # –§–æ—Ä–º–∞ –≤—Ö–æ–¥—É
    ‚îú‚îÄ‚îÄ register.html              # –§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
    ‚îú‚îÄ‚îÄ profile.html               # –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    ‚îî‚îÄ‚îÄ profile_update.html        # –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
```

### –ë–∞–∑–æ–≤–∏–π –®–∞–±–ª–æ–Ω (base.html)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```html
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}–§–æ—Ä—É–º{% endblock %}</title>
    <!-- Bootstrap 5.3 CSS -->
    <!-- Bootstrap Icons -->
    <!-- Custom CSS -->
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <!-- –õ–æ–≥–æ—Ç–∏–ø/–Ω–∞–∑–≤–∞ —Ñ–æ—Ä—É–º—É -->
        <!-- –ü–æ—à—É–∫–æ–≤–∞ —Ñ–æ—Ä–º–∞ -->
        <!-- –ú–µ–Ω—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ / Login/Register -->
    </nav>

    <!-- Messages (Django messages framework) -->
    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="container my-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p>&copy; 2024 –§–æ—Ä—É–º</p>
    </footer>

    <!-- Bootstrap JS -->
    <!-- Custom JS -->
</body>
</html>
```

**–ö–ª—é—á–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:**
- **Navbar:** –ª–æ–≥–æ—Ç–∏–ø, –ø–æ—à—É–∫, –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è, dropdown –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **Messages:** –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è Django messages (success, error, warning, info)
- **Container:** Bootstrap responsive layout
- **Footer:** –∫–æ–ø—ñ—Ä–∞–π—Ç, –ø–æ—Å–∏–ª–∞–Ω–Ω—è

### –ì–æ–ª–æ–≤–Ω–∞ –°—Ç–æ—Ä—ñ–Ω–∫–∞ (forum/home.html)

**–ë–ª–æ–∫–∏:**
1. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤ (APPROVED)
   - –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤
   - –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —á–∏—Å–ª–∞–º–∏

2. **–°–ø–∏—Å–æ–∫ –ö–∞—Ç–µ–≥–æ—Ä—ñ–π:**
   - –ù–∞–∑–≤–∞, –æ–ø–∏—Å
   - –Ü–∫–æ–Ω–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤ (–≤–∫–ª—é—á–∞—é—á–∏ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)
   - –û—Å—Ç–∞–Ω–Ω—ñ–π —Ç–æ–ø—ñ–∫
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ–π

3. **–ù–µ–¥–∞–≤–Ω—ñ –¢–æ–ø—ñ–∫–∏:**
   - 10 –æ—Å—Ç–∞–Ω–Ω—ñ—Ö APPROVED —Ç–æ–ø—ñ–∫—ñ–≤
   - –ê–≤—Ç–æ—Ä, –¥–∞—Ç–∞, –∫–∞—Ç–µ–≥–æ—Ä—ñ—è
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –ö–∞—Ç–µ–≥–æ—Ä—ñ—è (forum/category_detail.html)

**–ë–ª–æ–∫–∏:**
1. **Breadcrumbs:**
   - –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
   - –ì–æ–ª–æ–≤–Ω–∞ ‚Üí ... ‚Üí –ë–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó ‚Üí –ü–æ—Ç–æ—á–Ω–∞

2. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:**
   - –ù–∞–∑–≤–∞ —Ç–∞ –æ–ø–∏—Å
   - –ö–Ω–æ–ø–∫–∞ "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–æ–ø—ñ–∫" (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö)

3. **–ü—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó:**
   - –°–ø–∏—Å–æ–∫ –¥–æ—á—ñ—Ä–Ω—ñ—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
   - –Ü–∫–æ–Ω–∫–∏, –Ω–∞–∑–≤–∏, –æ–ø–∏—Å–∏

4. **–°–ø–∏—Å–æ–∫ –¢–æ–ø—ñ–∫—ñ–≤:**
   - –¢–∞–±–ª–∏—Ü—è: –¢–æ–ø—ñ–∫ | –ê–≤—Ç–æ—Ä | –í—ñ–¥–ø–æ–≤—ñ–¥—ñ | –ü–µ—Ä–µ–≥–ª—è–¥–∏ | –û—Å—Ç–∞–Ω–Ω—ñ–π –ø–æ—Å—Ç
   - –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏: üìå (pinned), üîí (closed), ‚è≥ (pending)
   - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (25 –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É)

### –¢–æ–ø—ñ–∫ (forum/topic_detail.html)

**–ë–ª–æ–∫–∏:**
1. **Breadcrumbs:**
   - –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

2. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –¢–æ–ø—ñ–∫—É:**
   - –ù–∞–∑–≤–∞ —Ç–æ–ø—ñ–∫—É
   - –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞–Ω—É (pinned, closed, pending)
   - –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó (–¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ñ–≤)

3. **–°–ø–∏—Å–æ–∫ –ü–æ—Å—Ç—ñ–≤:**
   - **–°–∞–π–¥–±–∞—Ä –ø–æ—Å—Ç–∞:**
     - –ê–≤–∞—Ç–∞—Ä –∞–≤—Ç–æ—Ä–∞
     - Username + —Ä–æ–ª—å (–±–µ–π–¥–∂)
     - –î–∞—Ç–∞ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è
     - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤
   - **–ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å—Ç–∞:**
     - Rich text –∫–æ–Ω—Ç–µ–Ω—Ç
     - –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
     - "–í—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ" —è–∫—â–æ updated_at != created_at
   - **–î—ñ—ó:**
     - –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ (–≤–ª–∞—Å–Ω–∏–∫ –∞–±–æ can_edit_any_post)
     - –í–∏–¥–∞–ª–∏—Ç–∏ (–≤–ª–∞—Å–Ω–∏–∫ –∞–±–æ can_delete_any_post)
   - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (20 –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É)

4. **–§–æ—Ä–º–∞ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ:**
   - CKEditor –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
   - –ö–Ω–æ–ø–∫–∞ "–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏"
   - –¢—ñ–ª—å–∫–∏ —è–∫—â–æ —Ç–æ–ø—ñ–∫ –Ω–µ –∑–∞–∫—Ä–∏—Ç–∏–π
   - –¢—ñ–ª—å–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö (–Ω–µ banned)

### –ú–æ–¥–µ—Ä–∞—Ü—ñ—è (forum/moderation_queue.html)

**–ë–ª–æ–∫–∏:**
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
   - "–ß–µ—Ä–≥–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó"
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—á—ñ–∫—É—é—á–∏—Ö —Ç–æ–ø—ñ–∫—ñ–≤

2. **–°–ø–∏—Å–æ–∫ –¢–æ–ø—ñ–∫—ñ–≤ PENDING:**
   - –¢–∞–±–ª–∏—Ü—è: –¢–æ–ø—ñ–∫ | –ê–≤—Ç–æ—Ä | –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è | –î—ñ—ó
   - **–î—ñ—ó:**
     - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ (topic_detail)
     - –°—Ö–≤–∞–ª–∏—Ç–∏ (–∫–Ω–æ–ø–∫–∞)
     - –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ (—Ñ–æ—Ä–º–∞ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä–µ–º)

3. **–ü–æ—Ä–æ–∂–Ω—è —á–µ—Ä–≥–∞:**
   - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–ù–µ–º–∞—î —Ç–æ–ø—ñ–∫—ñ–≤ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—é"

### –ü–æ—à—É–∫ (forum/search.html)

**–ë–ª–æ–∫–∏:**
1. **–ü–æ—à—É–∫–æ–≤–∞ –§–æ—Ä–º–∞:**
   - Input –¥–ª—è –∑–∞–ø–∏—Ç—É
   - –ö–Ω–æ–ø–∫–∞ "–®—É–∫–∞—Ç–∏"

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏:**
   - –°–ø–∏—Å–æ–∫ —Ç–æ–ø—ñ–∫—ñ–≤ —â–æ –º—ñ—Å—Ç—è—Ç—å –∑–∞–ø–∏—Ç
   - –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ (–º–æ–∂–ª–∏–≤–µ)
   - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è

### –ü—Ä–æ—Ñ—ñ–ª—å (users/profile.html)

**–ë–ª–æ–∫–∏:**
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ü—Ä–æ—Ñ—ñ–ª—é:**
   - –ê–≤–∞—Ç–∞—Ä (–≤–µ–ª–∏–∫–∏–π)
   - Username
   - –†–æ–ª—å (–∫–æ–ª—å–æ—Ä–æ–≤–∏–π –±–µ–π–¥–∂)
   - –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–≥—É–≤–∞—Ç–∏" (—è–∫—â–æ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å)
   - –ö–Ω–æ–ø–∫–∞ "–ë–∞–Ω/–†–æ–∑–±–∞–Ω" (—è–∫—â–æ —î –ø—Ä–∞–≤–æ can_ban_users)

2. **–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:**
   - –ë—ñ–æ (rich text)
   - –õ–æ–∫–∞—Ü—ñ—è
   - –í–µ–±-—Å–∞–π—Ç (–ø–æ—Å–∏–ª–∞–Ω–Ω—è)
   - –î–∞—Ç–∞ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–≤

4. **–û—Å—Ç–∞–Ω–Ω—ñ –¢–æ–ø—ñ–∫–∏:**
   - 10 –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ç–æ–ø—ñ–∫—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - –ó –¥–∞—Ç–∞–º–∏ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏

### –ö–∞—Å—Ç–æ–º–Ω—ñ Template Tags (user_tags.py)

#### –§—ñ–ª—å—Ç—Ä: role_badge
```django
{% load user_tags %}
{{ user|role_badge|safe }}
```

**–í–∏—Ö—ñ–¥:**
```html
<span class="badge bg-success">MODERATOR</span>
```

**–ö–æ–ª—å–æ—Ä–∏ –∑–∞ —Ä–æ–ª—è–º–∏:**
- OWNER ‚Üí bg-danger (—á–µ—Ä–≤–æ–Ω–∏–π)
- ADMINISTRATOR ‚Üí bg-warning (–∂–æ–≤—Ç–∏–π)
- MODERATOR ‚Üí bg-success (–∑–µ–ª–µ–Ω–∏–π)
- VIP ‚Üí bg-info (—Å–∏–Ω—ñ–π)
- MEMBER ‚Üí bg-secondary (—Å—ñ—Ä–∏–π)
- BANNED ‚Üí bg-dark (—á–æ—Ä–Ω–∏–π)

#### –§—ñ–ª—å—Ç—Ä: has_perm
```django
{% if request.user|has_perm:"can_moderate_topics" %}
    <a href="{% url 'forum:moderation_queue' %}">–ú–æ–¥–µ—Ä–∞—Ü—ñ—è</a>
{% endif %}
```

**–õ–æ–≥—ñ–∫–∞:**
```python
@register.filter
def has_perm(user, permission_name):
    if not user.is_authenticated:
        return False
    return user.profile.has_permission(permission_name)
```

### Bootstrap –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ

- **Navbar** - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- **Container/Row/Col** - grid layout
- **Card** - –∫–∞—Ä—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π, –ø–æ—Å—Ç—ñ–≤
- **Badge** - —Ä–æ–ª—ñ, —Å—Ç–∞—Ç—É—Å–∏
- **Button** - –¥—ñ—ó (btn-primary, btn-success, btn-danger)
- **Alert** - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (success, danger, warning, info)
- **Pagination** - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö
- **Form Controls** - inputs, textareas
- **Dropdown** - –º–µ–Ω—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **Modal** - (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è) –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

### Responsive Design

- **Mobile-first:** Bootstrap 5 responsive grid
- **Breakpoints:**
  - xs: <576px - –º–æ–±—ñ–ª—å–Ω—ñ
  - sm: ‚â•576px - —Ç–µ–ª–µ—Ñ–æ–Ω–∏ landscape
  - md: ‚â•768px - –ø–ª–∞–Ω—à–µ—Ç–∏
  - lg: ‚â•992px - –¥–µ—Å–∫—Ç–æ–ø–∏
  - xl: ‚â•1200px - –≤–µ–ª–∏–∫—ñ –µ–∫—Ä–∞–Ω–∏

### –Ü–∫–æ–Ω–∫–∏ (Bootstrap Icons)

- üìå (bi-pin) - –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–∏–π —Ç–æ–ø—ñ–∫
- üîí (bi-lock) - –∑–∞–∫—Ä–∏—Ç–∏–π —Ç–æ–ø—ñ–∫
- ‚è≥ (bi-clock) - –æ—á—ñ–∫—É—î –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- ‚úèÔ∏è (bi-pencil) - —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏
- üóëÔ∏è (bi-trash) - –≤–∏–¥–∞–ª–∏—Ç–∏
- üë§ (bi-person) - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- üîç (bi-search) - –ø–æ—à—É–∫

---

## –ë–∞–∑–∞ –î–∞–Ω–∏—Ö —Ç–∞ –ú—ñ–≥—Ä–∞—Ü—ñ—ó

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ë–∞–∑–∏ –î–∞–Ω–∏—Ö

**–û—Å–Ω–æ–≤–Ω–∞ –ë–î:** PostgreSQL

**settings.py –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```python
import dj_database_url
from environs import Env

env = Env()
env.read_env()

DATABASES = {
    'default': dj_database_url.config(
        default='sqlite:///db.sqlite3',
        conn_max_age=600,
        conn_health_checks=True,
    )
}
```

**–ó–º—ñ–Ω–Ω–∞ –æ—Ç–æ—á–µ–Ω–Ω—è:**
```bash
# PostgreSQL
DATABASE_URL=postgresql://user:password@host:port/database

# SQLite (fallback –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
DATABASE_URL=sqlite:///db.sqlite3
```

**–î—Ä–∞–π–≤–µ—Ä–∏:**
- `psycopg2-binary==2.9.11` - PostgreSQL adapter (binary)
- `psycopg[binary]==3.3.2` - PostgreSQL adapter (–Ω–æ–≤–∏–π)
- `dj-database-url==3.0.1` - URL parser

**–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É (Neon.tech):**

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Neon.tech** - serverless PostgreSQL –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Neon.tech:**
```bash
# –ü—Ä–∏–∫–ª–∞–¥ DATABASE_URL –¥–ª—è Neon.tech
DATABASE_URL=postgresql://username:password@ep-cool-name-123456.us-east-2.aws.neon.tech/neondb?sslmode=require
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ Neon.tech:**
- **Serverless –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —Ç–∞ scale-to-zero
- **–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è:** AWS (us-east-2, eu-central-1, —Ç–∞ —ñ–Ω—à—ñ —Ä–µ–≥—ñ–æ–Ω–∏)
- **SSL/TLS:** –æ–±–æ–≤'—è–∑–∫–æ–≤–µ (`sslmode=require`)
- **Connection pooling:** –≤–±—É–¥–æ–≤–∞–Ω–∏–π Neon connection pooler
- **Branching:** –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≥—ñ–ª–∫–∏ –ë–î (—è–∫ –≤ Git)
- **Backup:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ point-in-time recovery backups
- **–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω:**
  - 0.5 GB —Å—Ö–æ–≤–∏—â–∞
  - 1 –ø—Ä–æ–µ–∫—Ç
  - –ù–µ–æ–±–º–µ–∂–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏
  - Auto-suspend –ø—ñ—Å–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

**–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**
1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ https://neon.tech
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç
3. –í–∏–±—Ä–∞—Ç–∏ —Ä–µ–≥—ñ–æ–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ —Ç–æ–π —Å–∞–º–∏–π, —â–æ —ñ OnRender)
4. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ Connection String
5. –î–æ–¥–∞—Ç–∏ –≤ `.env` –∞–±–æ OnRender Environment Variables:
   ```
   DATABASE_URL=<connection-string-from-neon>
   ```

**–ü–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è Django:**
- –®–≤–∏–¥–∫–µ —Ö–æ–ª–æ–¥–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (–≤–∞–∂–ª–∏–≤–æ –¥–ª—è serverless)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –≤—Å—ñ–º–∞ PostgreSQL —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –Ü—Å—Ç–æ—Ä—ñ—è –ú—ñ–≥—Ä–∞—Ü—ñ–π

#### apps.forum.migrations

**0001_initial.py** - –ü–æ—á–∞—Ç–∫–æ–≤–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ Category:
  - name (CharField, unique)
  - description (TextField)
  - created_at (DateTimeField, auto_now_add)

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ Topic:
  - title (CharField)
  - category (ForeignKey ‚Üí Category)
  - author (ForeignKey ‚Üí User)
  - created_at, updated_at (DateTimeField)
  - is_pinned, is_closed (BooleanField)
  - views (IntegerField, default=0)

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ Post:
  - topic (ForeignKey ‚Üí Topic)
  - author (ForeignKey ‚Üí User)
  - content (TextField)
  - created_at, updated_at (DateTimeField)

**0002_alter_post_content.py** - CKEditor —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- –ó–º—ñ–Ω–∞ Post.content:
  - –ó TextField ‚Üí CKEditor5Field
  - –î–æ–¥–∞–≤–∞–Ω–Ω—è Rich Text —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É
  - config_name='default'

**0003_category_parent_alter_category_name_and_more.py** - –Ü—î—Ä–∞—Ä—Ö—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è Category.parent:
  - ForeignKey('self', null=True, blank=True)
  - on_delete=CASCADE
  - related_name='subcategories'
- –ó–º—ñ–Ω–∞ Category.name:
  - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è unique=True
  - –ú–æ–∂–ª–∏–≤—ñ —ñ–Ω—à—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**0004_moderationaction_topic_moderated_at_and_more.py** - –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ ModerationAction:
  - topic (ForeignKey ‚Üí Topic, on_delete=CASCADE)
  - moderator (ForeignKey ‚Üí User, on_delete=CASCADE)
  - action (CharField: 'approve'/'reject')
  - comment (TextField)
  - created_at (DateTimeField, auto_now_add)

- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–æ Topic:
  - status (CharField: 'pending'/'approved'/'rejected', default='pending')
  - moderated_by (ForeignKey ‚Üí User, SET_NULL)
  - moderated_at (DateTimeField, null=True)
  - moderation_comment (TextField, blank=True)

- Data migration:
  - –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ —Ç–æ–ø—ñ–∫–∏ ‚Üí status='approved'

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É:
  - Topic: index_together = [('status', '-created_at')]
  - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è —á–µ—Ä–≥–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

#### apps.users.migrations

**0001_initial.py** - –ü–æ—á–∞—Ç–∫–æ–≤–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ Profile:
  - user (OneToOneField ‚Üí User, on_delete=CASCADE)
  - avatar (ImageField, upload_to='avatars/', blank=True, null=True)
  - bio (TextField, blank=True)
  - location (CharField, max_length=100, blank=True)
  - website (URLField, max_length=200, blank=True)
  - joined_date (DateTimeField, auto_now_add=True)

**0002_alter_profile_bio.py** - Rich Text –¥–ª—è –±—ñ–æ
- –ó–º—ñ–Ω–∞ Profile.bio:
  - –ó TextField ‚Üí CKEditor5Field
  - config_name='simple'
  - –û–±–º–µ–∂–µ–Ω–∏–π –Ω–∞–±—ñ—Ä —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

**0003_role_profile_role.py** - –†–æ–ª—å–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ Role:
  - name (CharField, max_length=50, unique=True)
  - level (IntegerField, default=0)
  - color (CharField, max_length=20, default='secondary')
  - can_edit_any_post (BooleanField, default=False)
  - can_delete_any_post (BooleanField, default=False)
  - can_close_topics (BooleanField, default=False)
  - can_pin_topics (BooleanField, default=False)
  - can_manage_users (BooleanField, default=False)
  - can_manage_categories (BooleanField, default=False)
  - can_ban_users (BooleanField, default=False)

- –î–æ–¥–∞–≤–∞–Ω–Ω—è Profile.role:
  - ForeignKey(Role, on_delete=SET_NULL, null=True, blank=True)
  - related_name='profiles'

**0004_role_can_moderate_topics.py** - –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è Role.can_moderate_topics:
  - BooleanField, default=False
  - 8-–º–µ –ø—Ä–∞–≤–æ –¥–æ—Å—Ç—É–ø—É

### –°—Ö–µ–º–∞ –ë–∞–∑–∏ –î–∞–Ω–∏—Ö (PostgreSQL)

**–•–æ—Å—Ç–∏–Ω–≥:** Neon.tech - serverless PostgreSQL

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î:**
- –†–æ–∑–º—ñ—â–µ–Ω–∞ –Ω–∞ Neon.tech (AWS —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –í–µ—Ä—Å—ñ—è PostgreSQL: 16+ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è)
- –†–µ–≥—ñ–æ–Ω: –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–±—Ä–∞–Ω–∏–π –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ us-east-2 –¥–ª—è OnRender)
- Connection pooling: –≤–≤—ñ–º–∫–Ω–µ–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- SSL: –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π (sslmode=require)

**–¢–∞–±–ª–∏—Ü—ñ:**
1. `auth_user` - Django default User
2. `users_role` - –†–æ–ª—ñ
3. `users_profile` - –ü—Ä–æ—Ñ—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
4. `forum_category` - –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó
5. `forum_topic` - –¢–æ–ø—ñ–∫–∏
6. `forum_post` - –ü–æ—Å—Ç–∏
7. `forum_moderationaction` - –Ü—Å—Ç–æ—Ä—ñ—è –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

**Foreign Keys:**
```sql
-- Profile ‚Üí User
users_profile.user_id ‚Üí auth_user.id (CASCADE)

-- Profile ‚Üí Role
users_profile.role_id ‚Üí users_role.id (SET NULL)

-- Topic ‚Üí Category
forum_topic.category_id ‚Üí forum_category.id (CASCADE)

-- Topic ‚Üí User (author)
forum_topic.author_id ‚Üí auth_user.id (CASCADE)

-- Topic ‚Üí User (moderator)
forum_topic.moderated_by_id ‚Üí auth_user.id (SET NULL)

-- Post ‚Üí Topic
forum_post.topic_id ‚Üí forum_topic.id (CASCADE)

-- Post ‚Üí User
forum_post.author_id ‚Üí auth_user.id (CASCADE)

-- Category ‚Üí Category (parent)
forum_category.parent_id ‚Üí forum_category.id (CASCADE)

-- ModerationAction ‚Üí Topic
forum_moderationaction.topic_id ‚Üí forum_topic.id (CASCADE)

-- ModerationAction ‚Üí User
forum_moderationaction.moderator_id ‚Üí auth_user.id (CASCADE)
```

**–Ü–Ω–¥–µ–∫—Å–∏:**
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏ –Ω–∞ ForeignKey –ø–æ–ª—è—Ö

-- –ö–∞—Å—Ç–æ–º–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
CREATE INDEX forum_topic_status_created_idx
ON forum_topic (status, created_at DESC);
```

### –ö–æ–º–∞–Ω–¥–∏ –ú—ñ–≥—Ä–∞—Ü—ñ–π

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py makemigrations

# –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py migrate

# –ü–µ—Ä–µ–≥–ª—è–¥ SQL –∫–æ–¥—É –º—ñ–≥—Ä–∞—Ü—ñ—ó
python manage.py sqlmigrate forum 0001

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py showmigrations

# –í—ñ–¥–∫–∞—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó (–æ–±–µ—Ä–µ–∂–Ω–æ!)
python manage.py migrate forum 0003
```

---

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### config/settings.py

**–ë–∞–∑–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
```python
BASE_DIR = Path(__file__).resolve().parent.parent

# Security
SECRET_KEY = env.str('SECRET_KEY', 'django-insecure-fallback-key')
DEBUG = env.bool('DEBUG', default=True)
ALLOWED_HOSTS = env.list('ALLOWED_HOSTS', default=['*'])
```

**–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –¥–æ–¥–∞—Ç–∫–∏:**
```python
INSTALLED_APPS = [
    # Django defaults
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # Third-party
    'django_ckeditor_5',

    # Local apps
    'apps.forum',
    'apps.users',
]
```

**Middleware:**
```python
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]
```

**Templates:**
```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

**–°—Ç–∞—Ç–∏—á–Ω—ñ —Ç–∞ –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏:**
```python
STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_DIRS = [BASE_DIR / 'static']

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
```

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:**
```python
LOGIN_URL = 'users:login'
LOGIN_REDIRECT_URL = 'forum:home'
LOGOUT_REDIRECT_URL = 'forum:home'
```

**–í–∞–ª—ñ–¥–∞—Ç–æ—Ä–∏ –ø–∞—Ä–æ–ª—ñ–≤:**
```python
AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
        'OPTIONS': {'min_length': 8}
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]
```

**–Ü–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è:**
```python
LANGUAGE_CODE = 'uk-ua'  # –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
TIME_ZONE = 'Europe/Kiev'
USE_I18N = True
USE_TZ = True
```

**CKEditor 5 –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```python
CKEDITOR_5_CONFIGS = {
    'default': {
        'toolbar': [
            'heading', '|',
            'bold', 'italic', 'link',
            'bulletedList', 'numberedList',
            'blockQuote', 'imageUpload', '|',
            'insertTable', 'mediaEmbed', '|',
            'fontSize', 'fontColor', 'fontBackgroundColor', '|',
            'undo', 'redo'
        ],
        'height': 400,
        'width': '100%',
    },
    'extends': {
        'toolbar': 'full',  # –í—Å—ñ –º–æ–∂–ª–∏–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
        'height': 500,
    },
    'simple': {
        'toolbar': ['bold', 'italic', 'link', 'bulletedList', 'numberedList'],
        'height': 200,  # –î–ª—è bio
    }
}

CKEDITOR_5_FILE_STORAGE = "django.core.files.storage.FileSystemStorage"
```

### –ó–º—ñ–Ω–Ω—ñ –û—Ç–æ—á–µ–Ω–Ω—è (.env)

**–ü—Ä–∏–∫–ª–∞–¥ .env.example:**
```env
# Django
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/djangoforum

# Superuser (–¥–ª—è deploy.sh)
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
DJANGO_SUPERUSER_PASSWORD=securepassword123
```

**–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ environs:**
```python
from environs import Env

env = Env()
env.read_env()  # –ß–∏—Ç–∞—î .env —Ñ–∞–π–ª

SECRET_KEY = env.str('SECRET_KEY', 'fallback')
DEBUG = env.bool('DEBUG', default=False)
ALLOWED_HOSTS = env.list('ALLOWED_HOSTS', default=[])
```

### config/urls.py

```python
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('apps.forum.urls')),
    path('', include('apps.users.urls')),
    path('ckeditor5/', include('django_ckeditor_5.urls')),
]

# Serve media files in development
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
```

### config/wsgi.py

```python
import os
from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_wsgi_application()
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- Gunicorn: `gunicorn config.wsgi:application`
- OnRender: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ Build Command —Ç–∞ Start Command

### config/asgi.py

```python
import os
from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_asgi_application()
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- Uvicorn: `uvicorn config.asgi:application`

---

## Management Commands

### python manage.py init_roles

**–§–∞–π–ª:** `apps/users/management/commands/init_roles.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ä–æ–ª–µ–π –∑ —ó—Ö –ø—Ä–∞–≤–∞–º–∏

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
python manage.py init_roles
```

**–©–æ —Ä–æ–±–∏—Ç—å:**

1. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î OWNER —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='OWNER',
    defaults={
        'level': 100,
        'color': 'danger',
        'can_edit_any_post': True,
        'can_delete_any_post': True,
        'can_close_topics': True,
        'can_pin_topics': True,
        'can_manage_users': True,
        'can_manage_categories': True,
        'can_ban_users': True,
        'can_moderate_topics': True,
    }
)
```

2. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î ADMINISTRATOR —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='ADMINISTRATOR',
    defaults={
        'level': 50,
        'color': 'warning',
        # –í—Å—ñ –ø—Ä–∞–≤–∞: True
    }
)
```

3. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î MODERATOR —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='MODERATOR',
    defaults={
        'level': 30,
        'color': 'success',
        'can_edit_any_post': True,
        'can_delete_any_post': True,
        'can_close_topics': True,
        'can_pin_topics': True,
        'can_ban_users': True,
        'can_moderate_topics': True,
        'can_manage_users': False,
        'can_manage_categories': False,
    }
)
```

4. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î VIP —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='VIP',
    defaults={
        'level': 20,
        'color': 'info',
        # –í—Å—ñ –ø—Ä–∞–≤–∞: False
    }
)
```

5. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î MEMBER —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='MEMBER',
    defaults={
        'level': 10,
        'color': 'secondary',
        # –í—Å—ñ –ø—Ä–∞–≤–∞: False
    }
)
```

6. **–°—Ç–≤–æ—Ä—é—î/–æ–Ω–æ–≤–ª—é—î BANNED —Ä–æ–ª—å:**
```python
Role.objects.update_or_create(
    name='BANNED',
    defaults={
        'level': 0,
        'color': 'dark',
        # –í—Å—ñ –ø—Ä–∞–≤–∞: False
    }
)
```

**–í–∏—Ö—ñ–¥:**
```
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: OWNER
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: ADMINISTRATOR
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: MODERATOR
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: VIP
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: MEMBER
–°—Ç–≤–æ—Ä–µ–Ω–æ/–æ–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª—å: BANNED
–†–æ–ª—ñ —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ!
```

**–ö–æ–ª–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:**
- –ü—ñ–¥ —á–∞—Å –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É (—á–µ—Ä–µ–∑ deploy.sh)
- –í—Ä—É—á–Ω—É –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç—É

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `update_or_create()` ‚Üí —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è
- –ù–µ –≤–∏–¥–∞–ª—è—î —ñ—Å–Ω—É—é—á—ñ —Ä–æ–ª—ñ
- –û–Ω–æ–≤–ª—é—î –ø—Ä–∞–≤–∞ —è–∫—â–æ –≤–æ–Ω–∏ –∑–º—ñ–Ω–∏–ª–∏—Å—è
- –ë–µ–∑–ø–µ—á–Ω–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### –Ü–Ω—à—ñ Django Management Commands

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ Django:**
```bash
# –ú—ñ–≥—Ä–∞—Ü—ñ—ó
python manage.py makemigrations
python manage.py migrate

# –ó–±—ñ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
python manage.py collectstatic --noinput

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞
python manage.py createsuperuser

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
python manage.py runserver

# Django shell
python manage.py shell

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
python manage.py check
```

---

## –î–µ–ø–ª–æ–π–º–µ–Ω—Ç

### deploy.sh –°–∫—Ä–∏–ø—Ç

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –ø—Ä–æ—Ü–µ—Å—É –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É

**–ó–º—ñ—Å—Ç deploy.sh:**
```bash
#!/bin/bash

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
echo "Installing dependencies..."
pip install -r requirements.txt

# –ó–±—ñ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
echo "Collecting static files..."
python manage.py collectstatic --noinput

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
echo "Making migrations..."
python manage.py makemigrations --noinput

# –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
echo "Running migrations..."
python manage.py migrate --noinput

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞ (—è–∫—â–æ –Ω–µ —ñ—Å–Ω—É—î)
echo "Creating superuser if not exists..."
python manage.py shell -c "
from django.contrib.auth import get_user_model;
User = get_user_model();
if not User.objects.filter(username='$DJANGO_SUPERUSER_USERNAME').exists():
    User.objects.create_superuser(
        username='$DJANGO_SUPERUSER_USERNAME',
        email='$DJANGO_SUPERUSER_EMAIL',
        password='$DJANGO_SUPERUSER_PASSWORD'
    )
"

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª–µ–π
echo "Initializing roles..."
python manage.py init_roles

echo "Deployment complete!"
```

**–ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:**
```env
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
DJANGO_SUPERUSER_PASSWORD=secure_password_here
```

**–ó–∞–ø—É—Å–∫:**
```bash
chmod +x deploy.sh
./deploy.sh
```

**–ï—Ç–∞–ø–∏ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É:**
1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
2. –ó–±—ñ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –≤ `staticfiles/`
3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –º—ñ–≥—Ä–∞—Ü—ñ–π (—è–∫—â–æ —î –∑–º—ñ–Ω–∏ –≤ –º–æ–¥–µ–ª—è—Ö)
4. –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π –¥–æ –ë–î
5. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞ (—è–∫—â–æ —â–µ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π)
6. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–ª–µ–π

### OnRender –î–µ–ø–ª–æ–π–º–µ–Ω—Ç

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ OnRender:**

1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Web Service:**
   - Environment: Python 3
   - Build Command: `./deploy.sh`
   - Start Command: `gunicorn config.wsgi:application`

2. **Environment Variables (OnRender Dashboard):**
   ```
   SECRET_KEY=...
   DEBUG=False
   ALLOWED_HOSTS=.onrender.com,yourdomain.com
   DATABASE_URL=postgresql://...
   DJANGO_SUPERUSER_USERNAME=admin
   DJANGO_SUPERUSER_EMAIL=admin@example.com
   DJANGO_SUPERUSER_PASSWORD=...
   PYTHON_VERSION=3.13
   ```

3. **PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (Neon.tech):**
   - –ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–≤—ñ–¥–¥–∞–ª–µ–Ω—É PostgreSQL** –±–∞–∑—É –¥–∞–Ω–∏—Ö –Ω–∞ **Neon.tech**
   - Neon.tech - serverless PostgreSQL –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è–º
   - **–ü–µ—Ä–µ–≤–∞–≥–∏ Neon.tech:**
     - –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω –∑ 0.5 GB —Å—Ö–æ–≤–∏—â–∞
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è (scale-to-zero)
     - Branching –¥–ª—è –±–∞–∑ –¥–∞–Ω–∏—Ö (git-like workflow)
     - –®–≤–∏–¥–∫–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
     - –í–∏—Å–æ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
   - **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**
     1. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ neon.tech
     2. –û—Ç—Ä–∏–º–∞–π—Ç–µ Connection String (—Ñ–æ—Ä–º–∞—Ç: `postgresql://user:pass@host/dbname`)
     3. –î–æ–¥–∞–π—Ç–µ –≤ OnRender Environment Variables —è–∫ `DATABASE_URL`
   - **–ü—Ä–∏–∫–ª–∞–¥ DATABASE_URL:**
     ```
     DATABASE_URL=postgresql://user:password@ep-xxx-yyy.us-east-2.aws.neon.tech/dbname?sslmode=require
     ```

4. **Build –ø—Ä–æ—Ü–µ—Å:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ requirements.txt
   - –í–∏–∫–æ–Ω—É—î deploy.sh (–º—ñ–≥—Ä–∞—Ü—ñ—ó, collectstatic, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä—é–∑–µ—Ä–∞, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª–µ–π)
   - –ó–±–∏—Ä–∞—î —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ –≤ staticfiles/

5. **–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ OnRender:**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–æ–≤–Ω—ñ—à–Ω—è PostgreSQL –ë–î –Ω–∞ **Neon.tech** (–Ω–µ managed database –≤—ñ–¥ OnRender)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π HTTPS
   - –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ (750 –≥–æ–¥–∏–Ω –Ω–∞ –º—ñ—Å—è—Ü—å)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∏ –∑ GitHub
   - Persistent disk –¥–ª—è media files (–ø–ª–∞—Ç–Ω–∞ –æ–ø—Ü—ñ—è)
   - –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—î —Å—Ö–æ–≤–∏—â–µ –¥–ª—è media (S3/Cloudinary)

### Docker –î–µ–ø–ª–æ–π–º–µ–Ω—Ç (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–∫–ª–∞–¥ Dockerfile:**
```dockerfile
FROM python:3.13-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

RUN python manage.py collectstatic --noinput

EXPOSE 8000

CMD ["gunicorn", "config.wsgi:application", "--bind", "0.0.0.0:8000"]
```

**docker-compose.yml:**
```yaml
version: '3.8'

services:
  db:
    image: postgres:16
    environment:
      POSTGRES_DB: djangoforum
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    volumes:
      - postgres_data:/var/lib/postgresql/data

  web:
    build: .
    command: gunicorn config.wsgi:application --bind 0.0.0.0:8000
    volumes:
      - .:/app
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    ports:
      - "8000:8000"
    env_file:
      - .env
    depends_on:
      - db

volumes:
  postgres_data:
  static_volume:
  media_volume:
```

### Production Checklist

**Before deployment:**
- [ ] `DEBUG = False` –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω–∏–π `SECRET_KEY`
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ `ALLOWED_HOSTS`
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ PostgreSQL DATABASE_URL
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (collectstatic)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ (S3 –∞–±–æ CDN)
- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (HTTPS)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ CSRF_TRUSTED_ORIGINS
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ email backend
- [ ] –£–≤—ñ–º–∫–Ω—É—Ç–∏ logging
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ backup –ë–î
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ init_roles

**Security headers:**
```python
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'
```

### Gunicorn Production

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫—É:**
```bash
gunicorn config.wsgi:application \
    --bind 0.0.0.0:8000 \
    --workers 4 \
    --timeout 120 \
    --access-logfile - \
    --error-logfile -
```

**Systemd service (Linux):**
```ini
[Unit]
Description=Django Forum Gunicorn
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/path/to/DjangoForum
Environment="PATH=/path/to/venv/bin"
ExecStart=/path/to/venv/bin/gunicorn config.wsgi:application --bind 0.0.0.0:8000

[Install]
WantedBy=multi-user.target
```

---

## –ë–µ–∑–ø–µ–∫–∞

### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ó–∞—Ö–æ–¥–∏ –ë–µ–∑–ø–µ–∫–∏

#### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –°–µ—Å—ñ—ó
- **Session-based authentication:** –∑–∞—Ö–∏—Å—Ç —á–µ—Ä–µ–∑ Django sessions
- **CSRF –∑–∞—Ö–∏—Å—Ç:** middleware –ø–µ—Ä–µ–≤—ñ—Ä—è—î CSRF —Ç–æ–∫–µ–Ω–∏
- **Password hashing:** PBKDF2 (Django default)
- **Password validators:** –º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Å—Ö–æ–∂—ñ—Å—Ç—å, –ø–æ–ø—É–ª—è—Ä–Ω—ñ –ø–∞—Ä–æ–ª—ñ

#### 2. –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ Injection –ê—Ç–∞–∫
- **SQL Injection:** Django ORM –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –µ–∫—Ä–∞–Ω—É—î –∑–∞–ø–∏—Ç–∏
- **XSS (Cross-Site Scripting):**
  - Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –µ–∫—Ä–∞–Ω—É—î —à–∞–±–ª–æ–Ω–∏
  - CKEditor –º–æ–∂–µ –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Å–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—ó
  - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `|safe` —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **Command Injection:** –Ω–µ–º–∞—î –ø—Ä—è–º–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è shell –∫–æ–º–∞–Ω–¥ –∑ user input

#### 3. –ö–æ–Ω—Ç—Ä–æ–ª—å –î–æ—Å—Ç—É–ø—É
- **LoginRequiredMixin:** –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥–ª—è –¥—ñ–π
- **UserPassesTestMixin:** –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- **–†–æ–ª—å–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞:** 6 —Ä—ñ–≤–Ω—ñ–≤ –¥–æ—Å—Ç—É–ø—É –∑ —Ä—ñ–∑–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏
- **–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É:** —Ç–æ–ø—ñ–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º PENDING

#### 4. –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ CSRF
- **CsrfViewMiddleware:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ CSRF —Ç–æ–∫–µ–Ω—ñ–≤
- **{% csrf_token %}** –≤ —É—Å—ñ—Ö —Ñ–æ—Ä–º–∞—Ö
- **AJAX –∑–∞–ø–∏—Ç–∏:** –ø–æ—Ç—Ä–µ–±—É—é—Ç—å CSRF –∑–∞–≥–æ–ª–æ–≤–∫–∞

#### 5. –ó–∞—Ö–∏—Å—Ç –§–∞–π–ª—ñ–≤
- **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä—ñ–≤:**
  - Pillow –≤–∞–ª—ñ–¥–∞—Ü—ñ—è (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ —Ü–µ —Ä–µ–∞–ª—å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
  - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ `media/avatars/`
  - –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ —Ñ–∞–π–ª—ñ–≤ —á–µ—Ä–µ–∑ ImageField
- **CKEditor —Ñ–∞–π–ª–∏:**
  - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ CKEditor upload
  - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ media –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

#### 6. Clickjacking Protection
- **XFrameOptionsMiddleware:** –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ iframe embedding
- **X-Frame-Options: DENY** header

#### 7. Security Headers
```python
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'
```

#### 8. Secret Key Management
```python
SECRET_KEY = env.str('SECRET_KEY', 'fallback-only-for-dev')
```
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `.env` —Ñ–∞–π–ª—ñ
- –ù–µ –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó (.env –≤ .gitignore)

### –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –í—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

#### 1. CKEditor Rich Text
**–†–∏–∑–∏–∫:** XSS —á–µ—Ä–µ–∑ HTML –∫–æ–Ω—Ç–µ–Ω—Ç

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
```python
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É —Å–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—é
pip install bleach

# –í –º–æ–¥–µ–ª—è—Ö –∞–±–æ views
import bleach

ALLOWED_TAGS = ['p', 'b', 'i', 'u', 'strong', 'em', 'a', 'ul', 'ol', 'li', 'blockquote']
ALLOWED_ATTRIBUTES = {'a': ['href', 'title']}

content = bleach.clean(user_content, tags=ALLOWED_TAGS, attributes=ALLOWED_ATTRIBUTES)
```

#### 2. Rate Limiting
**–†–∏–∑–∏–∫:** Brute force –∞—Ç–∞–∫–∏ –Ω–∞ login, —Å–ø–∞–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–ø—ñ–∫—ñ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
```python
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ django-ratelimit
pip install django-ratelimit

# –í views
from django_ratelimit.decorators import ratelimit

@ratelimit(key='ip', rate='5/m', method='POST')
def login_view(request):
    ...
```

#### 3. Email –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è
**–†–∏–∑–∏–∫:** –§–µ–π–∫–æ–≤—ñ –∞–∫–∞—É–Ω—Ç–∏, —Å–ø–∞–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- –î–æ–¥–∞—Ç–∏ email verification —á–µ—Ä–µ–∑ django-allauth
- –û–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π –∑ –æ–¥–Ω–æ–≥–æ IP

#### 4. –ú–µ–¥—ñ–∞ –§–∞–π–ª–∏ –≤ –ü—Ä–æ–¥–∞–∫—à–Ω—ñ
**–†–∏–∑–∏–∫:** –í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏, storage overflow

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
```python
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ S3 –∞–±–æ Cloudinary
# settings.py
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto3.S3Boto3Storage'
AWS_STORAGE_BUCKET_NAME = 'your-bucket'
AWS_S3_REGION_NAME = 'us-east-1'
```

#### 5. HTTPS Enforcement
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É:**
```python
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_HSTS_SECONDS = 31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
```

#### 6. Sensitive Data Exposure
**–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- DEBUG = False –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
- –õ–æ–≥–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å –ø–∞—Ä–æ–ª—ñ–≤
- .env –≤ .gitignore
- Secret keys –Ω–µ –≤ –∫–æ–¥—ñ

#### 7. API Endpoints (—è–∫—â–æ –¥–æ–¥–∞—é—Ç—å—Å—è)
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Django REST Framework
- Token authentication (JWT)
- Throttling (rate limiting)
- CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### Security Testing

**–ó–∞–ø—É—Å—Ç–∏—Ç–∏ Django security check:**
```bash
python manage.py check --deploy
```

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:**
- **Bandit:** –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ Python –∫–æ–¥—É –Ω–∞ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ
- **Safety:** –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –Ω–∞ CVE
- **OWASP ZAP:** —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É

```bash
pip install bandit safety

bandit -r apps/
safety check
```

---

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### 1. Database Query Optimization

#### select_related (ForeignKey JOIN)
**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ views.py:**
```python
# Topic –∑ category —Ç–∞ author –≤ –æ–¥–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ
topics = Topic.objects.select_related('category', 'author').filter(status='approved')

# –ó–∞–º—ñ—Å—Ç—å N+1 –∑–∞–ø–∏—Ç—ñ–≤ (1 + –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–ø—ñ–∫—ñ–≤)
# –¢–µ–ø–µ—Ä —Ç—ñ–ª—å–∫–∏ 1 JOIN –∑–∞–ø–∏—Ç
```

**–ï—Ñ–µ–∫—Ç:**
- –ó–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –ë–î
- –®–≤–∏–¥—à–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫—ñ–≤

#### prefetch_related (ManyToMany, Reverse FK)
**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```python
# Category –∑ —É—Å—ñ–º–∞ —Ç–æ–ø—ñ–∫–∞–º–∏
categories = Category.objects.prefetch_related('topics')

# Topic –∑ —É—Å—ñ–º–∞ –ø–æ—Å—Ç–∞–º–∏
topic = Topic.objects.prefetch_related('posts').get(pk=1)
```

**–ï—Ñ–µ–∫—Ç:**
- –î–≤–∞ –∑–∞–ø–∏—Ç–∏ –∑–∞–º—ñ—Å—Ç—å N+1
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω—ñ—Ö –∑–≤'—è–∑–∫—ñ–≤

#### –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è
```python
# –í TopicDetailView
topic = Topic.objects.select_related('category', 'author').prefetch_related(
    Prefetch('posts', queryset=Post.objects.select_related('author'))
).get(pk=pk)
```

#### –Ü–Ω–¥–µ–∫—Å–∏ –ë–î
**–í –º–æ–¥–µ–ª—è—Ö:**
```python
class Topic(models.Model):
    # ...
    class Meta:
        indexes = [
            models.Index(fields=['status', '-created_at']),
        ]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –®–≤–∏–¥–∫—ñ –∑–∞–ø–∏—Ç–∏ –¥–ª—è —á–µ—Ä–≥–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –®–≤–∏–¥–∫–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ –¥–∞—Ç—ñ

### 2. Caching Strategies (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)

**Template Fragment Caching:**
```django
{% load cache %}
{% cache 600 category_list %}
    {# –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∫–µ—à—É—î—Ç—å—Å—è –Ω–∞ 10 —Ö–≤ #}
    {% for category in categories %}
        ...
    {% endfor %}
{% endcache %}
```

**View-level Caching:**
```python
from django.views.decorators.cache import cache_page

@cache_page(60 * 15)  # 15 —Ö–≤–∏–ª–∏–Ω
def home(request):
    ...
```

**Database Query Caching:**
```python
from django.core.cache import cache

def get_categories():
    categories = cache.get('all_categories')
    if not categories:
        categories = list(Category.objects.all())
        cache.set('all_categories', categories, 60*60)  # 1 –≥–æ–¥–∏–Ω–∞
    return categories
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (settings.py):**
```python
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.redis.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/1',
    }
}
```

### 3. Pagination

**–î–ª—è —Å–ø–∏—Å–∫—ñ–≤:**
```python
from django.core.paginator import Paginator

# –í ListView
class CategoryDetailView(DetailView):
    paginate_by = 25  # 25 —Ç–æ–ø—ñ–∫—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
```

**–ï—Ñ–µ–∫—Ç:**
- –ú–µ–Ω—à–µ –¥–∞–Ω–∏—Ö –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
- –®–≤–∏–¥—à–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- –ö—Ä–∞—â–∞ UX –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤

### 4. Static Files Optimization

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CDN (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è):**
```python
# settings.py
STATIC_URL = 'https://cdn.yourdomain.com/static/'
```

**Compression:**
```python
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ django-compressor
INSTALLED_APPS += ['compressor']
STATICFILES_FINDERS += ['compressor.finders.CompressorFinder']

COMPRESS_ENABLED = True
COMPRESS_CSS_FILTERS = ['compressor.filters.css_default.CssAbsoluteFilter', 'compressor.filters.cssmin.rCSSMinFilter']
COMPRESS_JS_FILTERS = ['compressor.filters.jsmin.JSMinFilter']
```

### 5. Media Files Optimization

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å:**
```python
# –í –º–æ–¥–µ–ª—ñ –∞–±–æ –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ
from PIL import Image

def save(self, *args, **kwargs):
    super().save(*args, **kwargs)

    if self.avatar:
        img = Image.open(self.avatar.path)
        if img.width > 300 or img.height > 300:
            img.thumbnail((300, 300))
            img.save(self.avatar.path)
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è WebP:**
```python
img.save(self.avatar.path, format='WEBP', quality=85)
```

### 6. Database Connection Pooling

**–í settings.py (–¥–ª—è PostgreSQL):**
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'CONN_MAX_AGE': 600,  # 10 —Ö–≤–∏–ª–∏–Ω
        'CONN_HEALTH_CHECKS': True,
        # ... —ñ–Ω—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
    }
}
```

**–ï—Ñ–µ–∫—Ç:**
- –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å
- –ú–µ–Ω—à–µ overhead –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω—å

### 7. Lazy Loading (—É–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ)

**QuerySets —î lazy:**
```python
# –ó–∞–ø–∏—Ç –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
topics = Topic.objects.filter(status='approved')

# –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç
for topic in topics:
    print(topic.title)
```

### 8. Only/Defer (–≤–∏–±—ñ—Ä–∫–æ–≤—ñ –ø–æ–ª—è)

**–Ø–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤—Å—ñ –ø–æ–ª—è:**
```python
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è
topics = Topic.objects.only('id', 'title', 'created_at')

# –ê–±–æ –≤—ñ–¥–∫–ª–∞—Å—Ç–∏ –≤–µ–ª–∏–∫—ñ –ø–æ–ª—è
topics = Topic.objects.defer('moderation_comment')
```

### 9. Bulk Operations

**–î–ª—è –º–∞—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π:**
```python
# –ó–∞–º—ñ—Å—Ç—å —Ü–∏–∫–ª—É save()
topics = [Topic(title=f"Topic {i}", category=cat) for i in range(100)]
Topic.objects.bulk_create(topics)

# –ú–∞—Å–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
Topic.objects.filter(category=old_cat).update(category=new_cat)
```

### 10. Database-level Defaults

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ë–î defaults:**
```python
class Topic(models.Model):
    created_at = models.DateTimeField(auto_now_add=True)  # –ë–î default
    views = models.IntegerField(default=0)  # –ë–î default
```

**–ï—Ñ–µ–∫—Ç:**
- –ú–µ–Ω—à–µ Python-side –æ–±—Ä–æ–±–∫–∏
- –®–≤–∏–¥—à–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤

### Performance Monitoring (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)

**Django Debug Toolbar:**
```python
pip install django-debug-toolbar

INSTALLED_APPS += ['debug_toolbar']
MIDDLEWARE += ['debug_toolbar.middleware.DebugToolbarMiddleware']
```

**–ü–æ–∫–∞–∑—É—î:**
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å SQL –∑–∞–ø–∏—Ç—ñ–≤
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É
- Cache hits/misses
- Template rendering time

**Django Silk:**
```python
pip install django-silk
```
- –ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ —É –ø—Ä–æ–¥–∞–∫—à–Ω—ñ
- –ê–Ω–∞–ª—ñ–∑ –≤—É–∑—å–∫–∏—Ö –º—ñ—Å—Ü—å

---

## –î–æ–¥–∞—Ç–∫–æ–≤–∞ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### Git History

**–û—Å—Ç–∞–Ω–Ω—ñ –∫–æ–º—ñ—Ç–∏:**
1. `9e55b06` - Implement topic moderation system with role-based permissions
2. `1da3342` - Ensure superuser creation during deployment in deploy.sh
3. `16f3995` - Add uvicorn and related dependencies to pyproject.toml and requirements.txt
4. `51814aa` - Switch database from SQLite to PostgreSQL in settings.py
5. `c348d78` - Switch database from SQLite to PostgreSQL (duplicate)

**–ï–≤–æ–ª—é—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É:**
- –ü–æ—á–∞—Ç–æ–∫: SQLite, –±–∞–∑–æ–≤–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
- –î–æ–¥–∞–Ω–æ: Rich text editing (CKEditor)
- –î–æ–¥–∞–Ω–æ: –Ü—î—Ä–∞—Ä—Ö—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- –î–æ–¥–∞–Ω–æ: –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó –∑ RBAC
- –ü–µ—Ä–µ—Ö—ñ–¥: PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
- –î–æ–¥–∞–Ω–æ: ASGI –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (Uvicorn)
- –î–µ–ø–ª–æ–π–º–µ–Ω—Ç: OnRender + Neon.tech (serverless PostgreSQL)

### Dependencies Overview

**–û—Å–Ω–æ–≤–Ω—ñ (pyproject.toml):**
```toml
[project]
dependencies = [
    "Django==6.0",
    "django-ckeditor-5==0.2.18",
    "dj-database-url==3.0.1",
    "environs==14.5.0",
    "Pillow==12.0.0",
    "psycopg2-binary==2.9.11",
    "psycopg[binary]==3.3.2",
    "Gunicorn==23.0.0",
    "Uvicorn==0.38.0",
]
```

**–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:**
- **Web Framework:** Django 6.0
- **Rich Text:** django-ckeditor-5
- **Database:** psycopg2-binary, dj-database-url
- **Config:** environs
- **Images:** Pillow
- **WSGI/ASGI:** Gunicorn, Uvicorn

### Development vs Production

**Development:**
```env
DEBUG=True
DATABASE_URL=sqlite:///db.sqlite3
ALLOWED_HOSTS=*
```

**Production:**
```env
DEBUG=False
DATABASE_URL=postgresql://user:pass@host/db
ALLOWED_HOSTS=.onrender.com,yourdomain.com
SECRET_KEY=random-strong-key
SECURE_SSL_REDIRECT=True
```

### Future Enhancements (–º–æ–∂–ª–∏–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)

1. **Real-time Notifications:**
   - Django Channels –¥–ª—è WebSockets
   - –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

2. **Search Enhancement:**
   - Elasticsearch/PostgreSQL full-text search
   - –§–∞—Å–µ—Ç–Ω–∏–π –ø–æ—à—É–∫

3. **User Reputation System:**
   - –†–µ–π—Ç–∏–Ω–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - Badges/–¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è

4. **Advanced Moderation:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—è (ML)
   - Spam detection

5. **API:**
   - Django REST Framework
   - Mobile app –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

6. **Email Notifications:**
   - –ü—Ä–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö –Ω–∞ —Ç–æ–ø—ñ–∫–∏
   - –ü—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞—Ç—É—Å—É –º–æ–¥–µ—Ä–∞—Ü—ñ—ó

7. **File Attachments:**
   - –ü—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –¥–æ –ø–æ—Å—Ç—ñ–≤
   - –ü—Ä–µ–≤—å—é –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

8. **Private Messages:**
   - –û—Å–æ–±–∏—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ–∂ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏

9. **Emoji Reactions:**
   - –†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –ø–æ—Å—Ç–∏ (üëç, ‚ù§Ô∏è, etc.)

10. **Analytics Dashboard:**
    - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤/–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ñ–≤
    - –ì—Ä–∞—Ñ—ñ–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

---

## –®–≤–∏–¥–∫–∏–π –î–æ–≤—ñ–¥–Ω–∏–∫ –¥–ª—è AI

### –Ø–∫ –ø—Ä–∞—Ü—é—î –º–æ–¥–µ—Ä–∞—Ü—ñ—è:
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î —Ç–æ–ø—ñ–∫ ‚Üí —Å—Ç–∞—Ç—É—Å PENDING
2. –¢–æ–ø—ñ–∫ –≤–∏–¥–∏–º–∏–π —Ç—ñ–ª—å–∫–∏ –∞–≤—Ç–æ—Ä—É —Ç–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º
3. –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ–≥–ª—è–¥–∞—î –≤ —á–µ—Ä–∑—ñ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
4. –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä —Å—Ö–≤–∞–ª—é—î (APPROVED) ‚Üí –≤–∏–¥–∏–º–∏–π –≤—Å—ñ–º
5. –ê–±–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –≤—ñ–¥—Ö–∏–ª—è—î (REJECTED) –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä–µ–º ‚Üí –≤–∏–¥–∏–º–∏–π —Ç—ñ–ª—å–∫–∏ –∞–≤—Ç–æ—Ä—É
6. –í—Å—ñ –¥—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ ModerationAction (–∞—É–¥–∏—Ç)

### –Ø–∫ –ø—Ä–∞—Ü—é—é—Ç—å —Ä–æ–ª—ñ:
1. –ü—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–ª—å MEMBER
2. –ü—Ä–æ—Ñ—ñ–ª—å –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ User —á–µ—Ä–µ–∑ OneToOne
3. –†–æ–ª—å –º–∞—î 8 boolean –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
4. –ú–µ—Ç–æ–¥ `profile.has_permission('can_...')` –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø—Ä–∞–≤–æ
5. OWNER/ADMIN ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ is_staff=True (–¥–æ—Å—Ç—É–ø –¥–æ Django Admin)
6. BANNED ‚Üí –≤—Å—ñ –ø—Ä–∞–≤–∞ False, –Ω–µ –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç

### –Ø–∫ –ø—Ä–∞—Ü—é—î —ñ—î—Ä–∞—Ä—Ö—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π:
1. Category –º–∞—î –ø–æ–ª–µ parent (ForeignKey –Ω–∞ —Å–µ–±–µ)
2. `category.subcategories.all()` ‚Üí –¥–æ—á—ñ—Ä–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
3. `category.get_breadcrumbs()` ‚Üí –ª–∞–Ω—Ü—é–∂–æ–∫ –±–∞—Ç—å–∫—ñ–≤ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
4. `category.get_level()` ‚Üí –≥–ª–∏–±–∏–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ (–¥–ª—è –≤—ñ–¥—Å—Ç—É–ø—ñ–≤)
5. –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å (–¥–µ—Ä–µ–≤–æ)

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—É:
**–ü—Ä–æ–¥–∞–∫—à–Ω —Å—Ç–µ–∫:**
- **–í–µ–±-–¥–æ–¥–∞—Ç–æ–∫:** OnRender (web service)
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** Neon.tech (serverless PostgreSQL)
- **–°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏:** –∑–±–∏—Ä–∞—é—Ç—å—Å—è –Ω–∞ OnRender (collectstatic)
- **–ú–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏:** —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ S3/Cloudinary (–∞–±–æ persistent disk –Ω–∞ OnRender)

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
1. OnRender –∑–∞–ø—É—Å–∫–∞—î Django —á–µ—Ä–µ–∑ Gunicorn
2. Django –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ PostgreSQL –Ω–∞ Neon.tech —á–µ—Ä–µ–∑ DATABASE_URL
3. Build process (deploy.sh) –≤–∏–∫–æ–Ω—É—î –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–∞ Neon –ë–î
4. SSL –∑'—î–¥–Ω–∞–Ω–Ω—è –º—ñ–∂ OnRender —Ç–∞ Neon.tech (–æ–±–æ–≤'—è–∑–∫–æ–≤–µ)

**DATABASE_URL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è Neon:**
```
postgresql://username:password@ep-xxx-yyy.region.aws.neon.tech/dbname?sslmode=require
```

### –û—Å–Ω–æ–≤–Ω—ñ QuerySets:
```python
# –¢–æ–ø—ñ–∫–∏ –≤–∏–¥–∏–º—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
if user.is_authenticated and user.profile.has_permission('can_moderate_topics'):
    queryset = Topic.objects.all()  # –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –±–∞—á–∏—Ç—å –≤—Å–µ
elif user.is_authenticated:
    queryset = Topic.objects.filter(Q(status='approved') | Q(author=user))
else:
    queryset = Topic.objects.filter(status='approved')

# –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏
topics = Topic.objects.select_related('category', 'author').filter(status='approved')
topic = Topic.objects.prefetch_related('posts__author').get(pk=1)
```

### –ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏ –¥–ª—è –∑–º—ñ–Ω:
- **–ú–æ–¥–µ–ª—ñ:** `apps/forum/models.py`, `apps/users/models.py`
- **Views:** `apps/forum/views.py`, `apps/users/views.py`
- **Forms:** `apps/forum/forms.py`, `apps/users/forms.py`
- **URLs:** `apps/forum/urls.py`, `apps/users/urls.py`
- **Templates:** `templates/forum/`, `templates/users/`
- **Admin:** `apps/forum/admin.py`, `apps/users/admin.py`
- **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:** `config/settings.py`

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏:
```bash
# –†–æ–∑—Ä–æ–±–∫–∞
python manage.py runserver
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py init_roles

# –î–µ–ø–ª–æ–π–º–µ–Ω—Ç
./deploy.sh
python manage.py collectstatic --noinput

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
python manage.py check
python manage.py check --deploy
```

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ:** 2024-12-14
**–í–µ—Ä—Å—ñ—è –ø—Ä–æ–µ–∫—Ç—É:** Django 6.0, PostgreSQL
**–û—Å—Ç–∞–Ω–Ω—ñ–π –∫–æ–º—ñ—Ç:** 9e55b06 - Topic moderation system with RBAC

**–ü—Ä–æ–¥–∞–∫—à–Ω —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –í–µ–±-–¥–æ–¥–∞—Ç–æ–∫: OnRender
- –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö: Neon.tech (serverless PostgreSQL)
- –í–µ—Ä—Å—ñ—è PostgreSQL: 16+

---

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å –ü–û–í–ù–£ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç DjangoForum —ñ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π —ñ–Ω—à–∏–º–∏ AI –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏, —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É —Ç–∞ –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏.
